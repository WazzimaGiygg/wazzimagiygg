<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dados da Coleção checkuser</title>
    <!-- Adicione os SDKs do Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script> <!-- Necessário para autenticação -->
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        #loading { color: gray; }
        #error { color: red; }
    </style>
</head>
<body>
    <h1>Dados da Coleção 'checkuser'</h1>
    <p id="status"></p>
    <table id="checkUserTable">
        <thead>
            <tr>
                <th>ID do Documento</th>
                <th>Dados (JSON)</th>
            </tr>
        </thead>
        <tbody>
            <!-- Os dados serão inseridos aqui pelo JavaScript -->
        </tbody>
    </table>

    <script>
        // Sua configuração do Firebase
        // SUBSTITUA ESTES VALORES PELA SUA CONFIGURAÇÃO REAL DO PROJETO!
const firebaseConfig = {
    apiKey: "AIzaSyB9GkSqTIZ0kbVsba_WOdQeVAETrF9qna0",
    authDomain: "wzzm-ce3fc.firebaseapp.com",
    projectId: "wzzm-ce3fc",
    storageBucket: "wzzm-ce3fc.appspot.com",
    messagingSenderId: "249427877153",
    appId: "1:249427877153:web:0e4297294794a5aadeb260",
    measurementId: "G-PLKNZNFCQ8"
};

        // Inicialize o Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth(); // Inicialize o Auth

        const statusElement = document.getElementById('status');
        const tableBody = document.querySelector('#checkUserTable tbody');

        async function fetchCheckUserData() {
            statusElement.textContent = 'Carregando dados...';
            tableBody.innerHTML = ''; // Limpa a tabela antes de carregar novos dados

            // Exemplo de login anônimo para cumprir a regra de segurança de leitura
            // Em uma aplicação real, você usaria um método de autenticação mais robusto.
            // Se o usuário já estiver logado, esta linha não fará nada.
            try {
                if (!auth.currentUser) {
                    await auth.signInAnonymously();
                    statusElement.textContent = 'Usuário autenticado anonimamente. Carregando dados...';
                }
            } catch (error) {
                statusElement.textContent = `Erro na autenticação: ${error.message}. Não foi possível carregar os dados.`;
                console.error("Erro na autenticação anônima:", error);
                return;
            }

            try {
                const querySnapshot = await db.collection("checkuser").get();

                if (querySnapshot.empty) {
                    statusElement.textContent = 'Nenhum documento encontrado na coleção "checkuser".';
                } else {
                    statusElement.textContent = 'Dados carregados com sucesso!';
                    querySnapshot.forEach((doc) => {
                        const row = tableBody.insertRow();
                        const idCell = row.insertCell();
                        const dataCell = row.insertCell();

                        idCell.textContent = doc.id;
                        dataCell.textContent = JSON.stringify(doc.data(), null, 2); // Exibe os dados como JSON formatado
                    });
                }
            } catch (error) {
                statusElement.textContent = `Erro ao buscar dados: ${error.message}`;
                console.error("Erro ao buscar documentos:", error);
            }
        }

        // Chama a função ao carregar a página
        fetchCheckUserData();
    </script>
</body>
</html>
