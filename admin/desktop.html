<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WazzimaGiygg Admin Desktop</title>
    <style>
        body {
            margin: 0;
            background: url('https://wallpapercave.com/wp/wp2468785.jpg') center/cover no-repeat;
            font-family: 'Segoe UI', sans-serif;
            height: 100vh;
            overflow: hidden;
        }

        /* Barra de tarefas */
        .taskbar {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40px;
            background: rgba(20, 20, 20, 0.8);
            display: flex;
            align-items: center;
            padding: 0 10px;
            color: white;
        }

        .start-button {
            background: rgba(40, 40, 40, 0.9);
            border: none;
            color: white;
            padding: 5px 15px;
            margin-right: 10px;
            border-radius: 6px;
            cursor: pointer;
        }

        .menu {
            position: absolute;
            bottom: 40px;
            left: 10px;
            background: rgba(30, 30, 30, 0.95);
            color: white;
            border-radius: 8px;
            padding: 10px;
            width: 280px;
            display: none;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 6px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .menu-item:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .menu-item img {
            width: 20px;
            height: 20px;
            margin-right: 8px;
        }

        .window {
            position: absolute;
            top: 60px;
            left: 60px;
            width: 800px;
            height: 500px;
            background: white;
            border: 1px solid #666;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
            display: flex;
            flex-direction: column;
            resize: both;
            overflow: hidden;
            border-radius: 8px;
        }

        .window-header {
            background: #0078d7;
            color: white;
            padding: 6px 10px;
            cursor: move;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
        }

        .window-controls button {
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            font-weight: bold;
            margin-left: 5px;
        }

        .window iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Tela de login */
        #login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 9999;
        }

        #login-screen button {
            padding: 10px 20px;
            background: #0078d7;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 15px;
        }

        /* Popup admin */
        .admin-popup {
            position: absolute;
            bottom: 50px;
            left: 100px;
            width: 320px;
            background: rgba(40, 40, 40, 0.95);
            color: white;
            border-radius: 8px;
            padding: 10px;
            display: none;
        }

        .admin-popup a {
            display: block;
            color: white;
            padding: 6px;
            border-radius: 6px;
            text-decoration: none;
        }

        .admin-popup a:hover {
            background: rgba(255, 255, 255, 0.15);
        }
    </style>
</head>
<body>

    <div id="login-screen">
        <h2>Acesso restrito</h2>
        <p>FaÃ§a login com sua conta de administrador Google</p>
        <button id="loginBtn">Entrar com Google</button>
    </div>

    <div id="desktop">
        <div class="taskbar">
            <button class="start-button" id="startBtn">Iniciar</button>
            <button class="start-button" id="adminBtn">Admin</button>
        </div>

        <div class="menu" id="startMenu"></div>
        <div class="admin-popup" id="adminMenu"></div>
    </div>

    <script type="module">
        // ðŸ”¹ Firebase Auth Config
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB9GkSqTIZ0kbVsba_WOdQeVAETrF9qna0", // Chave de API removida por seguranÃ§a
            authDomain: "wzzm-ce3fc.firebaseapp.com",
            projectId: "wzzm-ce3fc",
            storageBucket: "wzzm-ce3fc.appspot.com",
            messagingSenderId: "249427877153",
            appId: "1:249427877153:web:0e4297294794a5aadeb260",
            measurementId: "G-PLKNZNFCQ8"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        // âš ï¸ AÃ‡ÃƒO NECESSÃRIA: SUBSTITUA A STRING ABAIXO PELO SEU UID REAL DO FIREBASE âš ï¸
        const adminUIDs = [
            "sZxfMuOBPbXdR8nttVPXIN8QOOl1",
            "6aPqWVh8JVYL5NqEb78iDGPD7dH3" // Remova ou substitua esta linha, se aplicÃ¡vel
        ];
        // âš ï¸ FIM DA AÃ‡ÃƒO NECESSÃRIA âš ï¸

        const loginScreen = document.getElementById("login-screen");
        const loginBtn = document.getElementById("loginBtn");
        const desktop = document.getElementById("desktop");

        loginBtn.addEventListener("click", () => {
            signInWithPopup(auth, provider);
        });

        onAuthStateChanged(auth, (user) => {
            if (user && adminUIDs.includes(user.uid)) {
                loginScreen.style.display = "none";
                desktop.style.display = "block";
            } else if (user) {
                alert("Acesso negado. Somente administradores podem entrar.");
                signOut(auth);
            } else {
                loginScreen.style.display = "flex";
                desktop.style.display = "none";
            }
        });

        // ðŸ”¹ Itens do menu principal
        const links = [
            { name: 'Termos de ServiÃ§o', url: 'https://wazzimagiygg.com/Termos%20de%20Servi%C3%A7o.pdf', iconUrl: 'iconmagic.png' },
            { name: 'PolÃ­tica de Privacidade', url: 'https://wazzimagiygg.com/Pol%C3%ADtica%20de%20Privacidade.pdf', iconUrl: 'iconmagic.png' },
            { name: 'Termos de ServiÃ§o da WIKI WAZZIMAGIYGG BRASIL', url: 'https://wazzimagiygg.com/html/?uid=42LLRmne0HAgdFtzzgwG', iconUrl: 'iconmagic.png' },
            { name: 'Manual de PolÃ­ticas de Privacidade e ModeraÃ§Ã£o', url: 'https://wazzimagiygg.com/html/?uid=9oD5c9P1uWmjI2C3bZSu', iconUrl: 'iconmagic.png' },
            { name: 'Manual de PolÃ­ticas de direito de privacidade', url: 'https://wazzimagiygg.com/html/?uid=F5CmMQDbrTpipTZoqd2x', iconUrl: 'iconmagic.png' },
            { name: 'Direito de privacidade sobre WazzimaGiygg', url: 'https://wazzimagiygg.com/html/?uid=ik1hWPxqHKLjA13MIqVW', iconUrl: 'iconmagic.png' },
            { name: 'Voltar para WazzimaGiygg', url: 'https://wazzimagiygg.com/', iconUrl: 'iconmagic.png' },
            { name: 'Voltar para painel', url: 'https://wazzimagiygg.com/admin/nkpx.html', iconUrl: 'iconmagic.png' }
        ];

        // ðŸ”¹ Menu admin separado
        const adminLinks = [
            { label: "PÃ¡gina inicial", href: "https://wazzimagiygg.com/admin/recepcao.html" },
            { label: "Adicionar Artigo", href: "https://wazzimagiygg.com/admin/admintools/editordeartigos.html" },
            { label: "ConheÃ§a WazzimaGiygg", href: "https://wazzimagiygg.com/admin/conhecawazzimagiygg.html" },
            { label: "Ferramentas", href: "https://wazzimagiygg.com/admin/ferramentasadministrativas.html" },
            { label: "Chat Admin", href: "https://wazzimagiygg.com/admin/chat/admin/" }
        ];

        const startMenu = document.getElementById("startMenu");
        const adminMenu = document.getElementById("adminMenu");

        links.forEach(item => {
            const div = document.createElement("div");
            div.className = "menu-item";
            div.innerHTML = `<img src="${item.iconUrl}" alt="icon"> ${item.name}`;
            div.onclick = () => openWindow(item.name, item.url);
            startMenu.appendChild(div);
        });

        adminLinks.forEach(link => {
            const a = document.createElement("a");
            a.href = link.href;
            a.target = "_blank";
            a.textContent = link.label;
            adminMenu.appendChild(a);
        });

        const startBtn = document.getElementById("startBtn");
        const adminBtn = document.getElementById("adminBtn");

        startBtn.onclick = () => {
            startMenu.style.display = startMenu.style.display === "block" ? "none" : "block";
            adminMenu.style.display = "none";
        };

        adminBtn.onclick = () => {
            adminMenu.style.display = adminMenu.style.display === "block" ? "none" : "block";
            startMenu.style.display = "none";
        };

        function openWindow(title, url) {
            const win = document.createElement("div");
            win.className = "window";
            win.innerHTML = `
                <div class="window-header">
                    <span>${title}</span>
                    <div class="window-controls">
                        <button class="minimize">â€”</button>
                        <button class="maximize">â¬œ</button>
                        <button class="close">âœ–</button>
                    </div>
                </div>
                <iframe src="${url}"></iframe>
            `;
            document.body.appendChild(win);

            const header = win.querySelector(".window-header");
            const iframe = win.querySelector("iframe");
            let isDragging = false;
            let offsetX, offsetY;
            let maximized = false;
            let prev = { top: 0, left: 0, width: 0, height: 0 };

            header.addEventListener("mousedown", (e) => {
                isDragging = true;
                offsetX = e.clientX - win.offsetLeft;
                offsetY = e.clientY - win.offsetTop;
            });

            document.addEventListener("mousemove", (e) => {
                if (isDragging && !maximized) {
                    win.style.left = e.clientX - offsetX + "px";
                    win.style.top = e.clientY - offsetY + "px";
                }
            });

            document.addEventListener("mouseup", () => isDragging = false);

            win.querySelector(".close").onclick = () => win.remove();
            win.querySelector(".minimize").onclick = () => win.style.display = "none";
            win.querySelector(".maximize").onclick = () => {
                if (!maximized) {
                    prev = { top: win.offsetTop, left: win.offsetLeft, width: win.offsetWidth, height: win.offsetHeight };
                    win.style.top = "0";
                    win.style.left = "0";
                    win.style.width = "100%";
                    win.style.height = "calc(100% - 40px)";
                    maximized = true;
                } else {
                    win.style.top = prev.top + "px";
                    win.style.left = prev.left + "px";
                    win.style.width = prev.width + "px";
                    win.style.height = prev.height + "px";
                    maximized = false;
                }
            };
        }
    </script>

</body>
</html>
