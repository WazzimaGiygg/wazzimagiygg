<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informa√ß√µes do Cliente - WZZM</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-lite/1.3.0/material.indigo-pink.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: calc(100vh - 200px);
            padding: 20px;
            box-sizing: border-box;
            margin: 0;
        }
        
        .mdl-card {
            width: 100%;
            max-width: 900px;
            margin: 20px auto;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .info-item {
            margin-bottom: 15px;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 4px;
            border-left: 4px solid #3f51b5;
        }
        
        .info-item strong {
            display: block;
            color: #3f51b5;
            margin-bottom: 5px;
            font-size: 0.9em;
        }
        
        .info-item span {
            display: block;
            font-size: 1.1em;
            word-break: break-word;
        }
        
        #loadingClientInfo, #clientError {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
        }
        
        #loadingClientInfo {
            color: #3f51b5;
            font-size: 1.2em;
        }
        
        #clientError {
            color: #F44336;
            background: #ffebee;
            border-radius: 8px;
            border-left: 4px solid #F44336;
        }
        
        .mdl-card__title {
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 30px;
        }
        
        .mdl-card__title-text {
            font-size: 2em;
            font-weight: 300;
            color: #3f51b5;
        }
        
        .mdl-card__actions {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            text-align: right;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            flex-wrap: wrap;
        }
        
        .debug-button {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000;
            background: #ff9800;
            color: white;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }
        
        .status-active {
            background: #4caf50;
            color: white;
        }
        
        .status-inactive {
            background: #ff9800;
            color: white;
        }
        
        .status-banned {
            background: #f44336;
            color: white;
        }
        
        .section-title {
            font-size: 1.5em;
            color: #3f51b5;
            margin: 30px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .mdl-card {
                padding: 20px;
                margin: 10px;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            .mdl-card__title-text {
                font-size: 1.5em;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .button-group button {
                width: 100%;
            }
        }
    </style>
</head>
<body>

    <!-- Bot√£o de Debug (apenas para desenvolvimento) -->
    <button onclick="debugFirebase()" class="mdl-button mdl-js-button mdl-button--raised debug-button">
        üêõ Debug
    </button>

    <div class="mdl-card mdl-shadow--2dp">
        <div class="mdl-card__title">
            <h2 class="mdl-card__title-text">
                <i class="material-icons" style="vertical-align: middle; margin-right: 10px;">person</i>
                Detalhes do Cliente
            </h2>
        </div>
        
        <div class="mdl-card__supporting-text" id="clientInfoContent">
            <!-- Estado de Carregamento -->
            <div id="loadingClientInfo">
                <div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div>
                <p>Carregando informa√ß√µes do cliente...</p>
            </div>
            
            <!-- Mensagem de Erro -->
            <div id="clientError" style="display:none;"></div>
            
            <!-- Dados do Cliente -->
            <div id="clientDataDisplay" style="display:none;">
                <h3 class="section-title">Informa√ß√µes Pessoais</h3>
                <div class="info-grid">
                    <div class="info-item">
                        <strong>UID Google</strong>
                        <span id="displayUidGoogle"></span>
                    </div>
                    
                    <div class="info-item">
                        <strong>Nome Completo</strong>
                        <span id="displayFullName"></span>
                    </div>
                    
                    <div class="info-item">
                        <strong>Nome Social</strong>
                        <span id="displaySocialName"></span>
                    </div>
                    
                    <div class="info-item">
                        <strong>CPF</strong>
                        <span id="displayCpf"></span>
                    </div>
                    
                    <div class="info-item">
                        <strong>RG</strong>
                        <span id="displayRg"></span>
                    </div>
                    
                    <div class="info-item">
                        <strong>Data de Nascimento</strong>
                        <span id="displayBirthDate"></span>
                    </div>
                    
                    <div class="info-item">
                        <strong>G√™nero</strong>
                        <span id="displayGender"></span>
                    </div>
                </div>
                
                <h3 class="section-title">Endere√ßo</h3>
                <div class="info-grid">
                    <div class="info-item">
                        <strong>Endere√ßo</strong>
                        <span id="displayAddress"></span>
                    </div>
                    
                    <div class="info-item">
                        <strong>CEP</strong>
                        <span id="displayZipCode"></span>
                    </div>
                    
                    <div class="info-item">
                        <strong>Cidade</strong>
                        <span id="displayCity"></span>
                    </div>
                    
                    <div class="info-item">
                        <strong>Estado</strong>
                        <span id="displayState"></span>
                    </div>
                    
                    <div class="info-item">
                        <strong>Pa√≠s</strong>
                        <span id="displayCountry"></span>
                    </div>
                </div>
                
                <h3 class="section-title">Contato</h3>
                <div class="info-grid">
                    <div class="info-item">
                        <strong>Telefone(s)</strong>
                        <span id="displayPhoneNumber"></span>
                    </div>
                    
                    <div class="info-item">
                        <strong>E-mail(s) Adicionais</strong>
                        <span id="displayEmail"></span>
                    </div>
                </div>
                
                <h3 class="section-title">Informa√ß√µes da Conta</h3>
                <div class="info-grid">
                    <div class="info-item">
                        <strong>Status da Conta</strong>
                        <span id="displayStatus"></span>
                    </div>
                    
                    <div class="info-item">
                        <strong>Cadastrado em</strong>
                        <span id="displayCreatedAt"></span>
                    </div>
                    
                    <div class="info-item">
                        <strong>√öltima Atualiza√ß√£o</strong>
                        <span id="displayUpdatedAt"></span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mdl-card__actions mdl-card--border">
            <div class="button-group">
                <button id="editClientBtn" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored">
                    <i class="material-icons">edit</i> Editar Informa√ß√µes
                </button>
                
                <button id="refreshBtn" class="mdl-button mdl-js-button mdl-button--raised">
                    <i class="material-icons">refresh</i> Recarregar
                </button>
                
                <button onclick="window.print()" class="mdl-button mdl-js-button mdl-button--raised">
                    <i class="material-icons">print</i> Imprimir
                </button>
            </div>
        </div>
    </div>

    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/material-design-lite/1.3.0/material.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    
    <script>
        // ========== CONFIGURA√á√ÉO DO FIREBASE ==========
        const firebaseConfig = {
            apiKey: "AIzaSyB9GkSqTIZ0kbVsba_WOdQeVAETrF9qna0",
            authDomain: "wzzm-ce3fc.firebaseapp.com",
            projectId: "wzzm-ce3fc",
            storageBucket: "wzzm-ce3fc.appspot.com",
            messagingSenderId: "249427877153",
            appId: "1:249427877153:web:0e4297294794a5aadeb260",
            measurementId: "G-PLKNZNFCQ8"
        };

        // Inicializa o Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
            console.log('‚úÖ Firebase inicializado');
        } else {
            firebase.app(); // J√° inicializado, usa a inst√¢ncia existente
        }
        
        const firestore = firebase.firestore();
        const auth = firebase.auth();

        // ========== ELEMENTOS DA P√ÅGINA ==========
        const loadingClientInfo = document.getElementById('loadingClientInfo');
        const clientError = document.getElementById('clientError');
        const clientDataDisplay = document.getElementById('clientDataDisplay');
        const editClientBtn = document.getElementById('editClientBtn');
        const refreshBtn = document.getElementById('refreshBtn');

        // ========== FUN√á√ïES UTILIT√ÅRIAS ==========
        
        // Obt√©m par√¢metro da URL
        function getParameterByName(name, url = window.location.href) {
            name = name.replace(/[\[\]]/g, '\\$&');
            const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
            const results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        // Formata CPF
        function formatCpf(cpf) {
            if (!cpf) return 'N/A';
            cpf = String(cpf).replace(/\D/g, '');
            if (cpf.length === 11) {
                return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
            }
            return cpf;
        }

        // Formata data
        function formatDate(timestamp) {
            if (!timestamp) return 'N/A';
            try {
                if (timestamp.toDate) {
                    return timestamp.toDate().toLocaleString('pt-BR');
                } else if (timestamp instanceof Date) {
                    return timestamp.toLocaleString('pt-BR');
                } else if (typeof timestamp === 'string' || typeof timestamp === 'number') {
                    return new Date(timestamp).toLocaleString('pt-BR');
                }
                return String(timestamp);
            } catch (e) {
                console.error('Erro ao formatar data:', e);
                return 'Data inv√°lida';
            }
        }

        // Formata telefone
        function formatPhone(phone) {
            if (!phone) return 'N/A';
            phone = String(phone).replace(/\D/g, '');
            if (phone.length === 11) {
                return phone.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
            } else if (phone.length === 10) {
                return phone.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
            }
            return phone;
        }

        // ========== FUN√á√ÉO PRINCIPAL - CARREGAR DADOS ==========
        async function loadClientData() {
            console.log('üîÑ Iniciando carregamento de dados do cliente...');
            
            loadingClientInfo.style.display = 'block';
            clientError.style.display = 'none';
            clientDataDisplay.style.display = 'none';

            // Obt√©m UID da URL ou do usu√°rio logado
            let clientId = getParameterByName('uid');
            
            if (!clientId) {
                console.log('üîç UID n√£o encontrado na URL, verificando usu√°rio logado...');
                const currentUser = auth.currentUser;
                if (currentUser) {
                    clientId = currentUser.uid;
                    console.log('‚úÖ Usando UID do usu√°rio logado:', clientId);
                } else {
                    console.log('‚ö†Ô∏è Nenhum usu√°rio logado encontrado');
                    showError('√â necess√°rio estar logado para visualizar estas informa√ß√µes.<br><br>'
                        + '<button onclick="redirectToLogin()" style="padding: 10px 20px; background: #3f51b5; color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 10px;">'
                        + 'üîë Fazer Login</button>');
                    return;
                }
            }

            console.log('üìã UID do cliente:', clientId);

            try {
                // Verifica autentica√ß√£o
                const user = auth.currentUser;
                if (!user) {
                    console.log('‚ö†Ô∏è Usu√°rio n√£o autenticado, tentando autentica√ß√£o silenciosa...');
                    // Tenta verificar se h√° um usu√°rio logado recentemente
                    await auth.authStateReady();
                    const updatedUser = auth.currentUser;
                    if (!updatedUser) {
                        throw new Error('Acesso n√£o autorizado. Fa√ßa login para continuar.');
                    }
                }

                console.log('üë§ Usu√°rio autenticado:', user ? user.email : 'N√£o autenticado');

                // Busca documento principal do cliente
                console.log('üì• Buscando dados do cliente na cole√ß√£o "clients"...');
                const clientDoc = await firestore.collection('clients').doc(clientId).get();

                if (!clientDoc.exists) {
                    console.log('‚ùå Cliente n√£o encontrado na cole√ß√£o "clients"');
                    showError('Cliente n√£o encontrado.<br><br>'
                        + '<button onclick="redirectToEdit()" style="padding: 10px 20px; background: #4caf50; color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 10px;">'
                        + '‚ûï Criar Cadastro</button>');
                    return;
                }

                const data = clientDoc.data();
                console.log('‚úÖ Dados do cliente carregados:', data);

                // Preenche os campos com os dados
                document.getElementById('displayUidGoogle').textContent = clientId || 'N/A';
                document.getElementById('displayFullName').textContent = data.fullName || 'N/A';
                document.getElementById('displayCpf').textContent = data.cpf ? formatCpf(data.cpf) : 'N/A';
                document.getElementById('displayRg').textContent = data.rg || 'N/A';
                document.getElementById('displaySocialName').textContent = data.socialName || 'N/A';
                document.getElementById('displayBirthDate').textContent = formatDate(data.birthDate);
                document.getElementById('displayGender').textContent = data.gender || 'N/A';
                document.getElementById('displayAddress').textContent = data.address || 'N/A';
                document.getElementById('displayZipCode').textContent = data.zipCode || 'N/A';
                document.getElementById('displayCity').textContent = data.city || 'N/A';
                document.getElementById('displayState').textContent = data.state || 'N/A';
                document.getElementById('displayCountry').textContent = data.country || 'N/A';
                document.getElementById('displayCreatedAt').textContent = formatDate(data.createdAt);
                document.getElementById('displayUpdatedAt').textContent = formatDate(data.updatedAt);

                // Status da conta
                let statusText = 'Desconhecido';
                let statusClass = '';
                if (data.isBanned) {
                    statusText = 'Banido';
                    statusClass = 'status-banned';
                } else if (data.isActive === false) {
                    statusText = 'Inativo';
                    statusClass = 'status-inactive';
                } else if (data.isActive === true) {
                    statusText = 'Ativo';
                    statusClass = 'status-active';
                }
                document.getElementById('displayStatus').innerHTML = 
                    `<span class="status-badge ${statusClass}">${statusText}</span>`;

                // Busca telefones
                try {
                    const phoneSnapshot = await firestore.collection('clientPhones')
                        .where('clientId', '==', clientId)
                        .get();
                    
                    if (!phoneSnapshot.empty) {
                        const phones = phoneSnapshot.docs.map(doc => {
                            const phoneData = doc.data();
                            return formatPhone(phoneData.phoneNumber);
                        }).join(', ');
                        document.getElementById('displayPhoneNumber').textContent = phones || 'N/A';
                    } else {
                        document.getElementById('displayPhoneNumber').textContent = 'N/A';
                    }
                } catch (phoneError) {
                    console.warn('‚ö†Ô∏è Erro ao carregar telefones:', phoneError);
                    document.getElementById('displayPhoneNumber').textContent = 'Erro ao carregar';
                }

                // Busca emails
                try {
                    const emailSnapshot = await firestore.collection('clientEmails')
                        .where('clientId', '==', clientId)
                        .get();
                    
                    if (!emailSnapshot.empty) {
                        const emails = emailSnapshot.docs.map(doc => {
                            const emailData = doc.data();
                            return emailData.emailAddress;
                        }).join(', ');
                        document.getElementById('displayEmail').textContent = emails || 'N/A';
                    } else {
                        document.getElementById('displayEmail').textContent = 
                            user ? user.email : 'N/A';
                    }
                } catch (emailError) {
                    console.warn('‚ö†Ô∏è Erro ao carregar emails:', emailError);
                    document.getElementById('displayEmail').textContent = 
                        user ? user.email : 'N/A';
                }

                // Mostra os dados
                clientDataDisplay.style.display = 'block';
                loadingClientInfo.style.display = 'none';

                // Configura bot√µes de a√ß√£o
                setupActionButtons(clientId, user);

            } catch (error) {
                console.error('‚ùå Erro ao carregar dados do cliente:', error);
                handleFirestoreError(error, clientId);
            }
        }

        // ========== MANIPULA√á√ÉO DE ERROS ==========
        function handleFirestoreError(error, clientId) {
            loadingClientInfo.style.display = 'none';
            
            let errorMessage = '';
            let showRetryButton = true;
            
            switch (error.code) {
                case 'permission-denied':
                case 'PERMISSION_DENIED':
                    errorMessage = `
                        <h4><i class="material-icons" style="vertical-align: middle;">lock</i> Permiss√£o Negada</h4>
                        <p>Voc√™ n√£o tem permiss√£o para acessar estas informa√ß√µes.</p>
                        <p><strong>Causas poss√≠veis:</strong></p>
                        <ul>
                            <li>‚ùå Sua conta n√£o tem acesso a este cliente</li>
                            <li>üîí Regras de seguran√ßa muito restritivas</li>
                            <li>üë§ Voc√™ n√£o est√° autenticado corretamente</li>
                        </ul>
                        <div style="margin-top: 20px;">
                            <button onclick="redirectToLogin()" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" style="margin-right: 10px;">
                                <i class="material-icons">login</i> Fazer Login
                            </button>
                            <button onclick="location.reload()" class="mdl-button mdl-js-button mdl-button--raised">
                                <i class="material-icons">refresh</i> Tentar Novamente
                            </button>
                        </div>
                    `;
                    break;
                    
                case 'not-found':
                    errorMessage = `
                        <h4><i class="material-icons" style="vertical-align: middle;">search_off</i> Cliente N√£o Encontrado</h4>
                        <p>N√£o foi encontrado um cadastro com o UID: <strong>${clientId}</strong></p>
                        <p>Voc√™ pode criar um novo cadastro para este cliente.</p>
                        <button onclick="redirectToEdit('${clientId}')" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" style="margin-top: 10px;">
                            <i class="material-icons">add</i> Criar Novo Cadastro
                        </button>
                    `;
                    break;
                    
                default:
                    errorMessage = `
                        <h4><i class="material-icons" style="vertical-align: middle;">error</i> Erro ao Carregar Dados</h4>
                        <p><strong>Detalhes do erro:</strong> ${error.message || 'Erro desconhecido'}</p>
                        <p><strong>C√≥digo:</strong> ${error.code || 'N/A'}</p>
                        <div style="margin-top: 20px;">
                            <button onclick="location.reload()" class="mdl-button mdl-js-button mdl-button--raised">
                                <i class="material-icons">refresh</i> Tentar Novamente
                            </button>
                            <button onclick="debugFirebase()" class="mdl-button mdl-js-button mdl-button--raised" style="margin-left: 10px;">
                                <i class="material-icons">bug_report</i> Debug
                            </button>
                        </div>
                    `;
            }
            
            showError(errorMessage);
        }

        // ========== FUN√á√ïES AUXILIARES ==========
        function showError(message) {
            clientError.innerHTML = message;
            clientError.style.display = 'block';
        }

        function setupActionButtons(clientId, currentUser) {
            // Bot√£o de edi√ß√£o
            if (currentUser && currentUser.uid === clientId) {
                editClientBtn.style.display = 'inline-block';
                editClientBtn.onclick = () => redirectToEdit(clientId);
            } else {
                editClientBtn.style.display = 'none';
            }
            
            // Bot√£o de recarregar
            refreshBtn.onclick = () => location.reload();
        }

        function redirectToLogin() {
            const returnUrl = encodeURIComponent(window.location.href);
            if (window.parent && window.parent.location) {
                window.parent.location.href = `index.html?returnUrl=${returnUrl}`;
            } else {
                window.location.href = `index.html?returnUrl=${returnUrl}`;
            }
        }

        function redirectToEdit(clientId) {
            const editUrl = `editar_cliente/?uid=${clientId}`;
            if (window.parent && window.parent.loadPage) {
                window.parent.loadPage(editUrl, true);
            } else {
                window.location.href = editUrl;
            }
        }

        // ========== FUN√á√ÉO DE DEBUG ==========
        function debugFirebase() {
            console.clear();
            console.log('=== üîç DEBUG FIREBASE ===');
            console.log('URL atual:', window.location.href);
            console.log('UID da URL:', getParameterByName('uid'));
            console.log('Configura√ß√£o Firebase:', firebaseConfig);
            
            const user = auth.currentUser;
            console.log('Usu√°rio atual:', user ? {
                uid: user.uid,
                email: user.email,
                displayName: user.displayName
            } : 'N√£o autenticado');
            
            // Testa conex√£o com Firestore
            console.log('üß™ Testando conex√£o com Firestore...');
            firestore.collection('clients').limit(1).get()
                .then(snapshot => {
                    console.log('‚úÖ Conex√£o Firestore: OK');
                    console.log('üìä Documentos na cole√ß√£o "clients":', snapshot.size);
                })
                .catch(error => {
                    console.error('‚ùå Erro Firestore:', error);
                });
            
            // Verifica regras de seguran√ßa
            console.log('üîí Testando regras de seguran√ßa...');
            const testDoc = firestore.collection('test').doc('test');
            testDoc.set({ test: true })
                .then(() => {
                    console.log('‚úÖ Escrita permitida');
                    return testDoc.delete();
                })
                .then(() => console.log('‚úÖ Exclus√£o permitida'))
                .catch(error => {
                    console.log('‚ùå Permiss√£o negada:', error.code);
                });
            
            alert('Informa√ß√µes de debug foram exibidas no console (F12)');
        }

        // ========== INICIALIZA√á√ÉO ==========
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ P√°gina de informa√ß√µes do cliente inicializada');
            
            // Inicializa componentes do Material Design Lite
            componentHandler.upgradeAllRegistered();
            
            // Configura monitoramento de autentica√ß√£o
            auth.onAuthStateChanged((user) => {
                console.log('üîê Estado de autentica√ß√£o alterado:', user ? 'Logado' : 'Deslogado');
                
                if (user) {
                    console.log('üë§ Usu√°rio logado:', user.email);
                    // Aguarda um pouco para garantir que tudo est√° pronto
                    setTimeout(() => {
                        loadClientData();
                    }, 500);
                } else {
                    // Se n√£o h√° usu√°rio logado, tenta carregar apenas com UID da URL
                    // (para visualiza√ß√£o de administradores, por exemplo)
                    const urlUid = getParameterByName('uid');
                    if (urlUid) {
                        console.log('üîó Tentando carregar com UID da URL:', urlUid);
                        loadClientData();
                    } else {
                        console.log('‚ö†Ô∏è Nenhum usu√°rio logado e nenhum UID na URL');
                        showError('Acesso n√£o autorizado. Fa√ßa login para continuar.');
                    }
                }
            });
            
            // For√ßa verifica√ß√£o inicial
            const currentUser = auth.currentUser;
            if (currentUser) {
                loadClientData();
            } else if (getParameterByName('uid')) {
                loadClientData();
            }
        });

        // ========== FUN√á√ïES GLOBAIS ==========
        window.debugFirebase = debugFirebase;
        window.redirectToLogin = redirectToLogin;
        window.redirectToEdit = redirectToEdit;
        
        // Adiciona listener para tecla F12 (debug)
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F12') {
                e.preventDefault();
                debugFirebase();
            }
        });
    </script>
</body>
</html>
