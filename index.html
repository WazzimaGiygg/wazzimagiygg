<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Wiki Not Pedia WZZM</title>
<link rel="icon" href="favicom.png" type="image/x-icon">
<style>
body {
  margin: 0;
  background: url('condedmonddantès.png') center/cover no-repeat;
  font-family: 'Segoe UI', sans-serif;
  height: 100vh;
  overflow: hidden;
}

/* BARRA DE TAREFAS */
.taskbar {
  position: fixed;
  bottom: 0;
  width: 100%;
  height: 40px;
  background: rgba(20, 20, 20, 0.85);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 10px;
  color: white;
  z-index: 100;
}

.taskbar-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.start-button {
  background: rgba(50, 50, 50, 0.9);
  border: none;
  color: white;
  border-radius: 6px;
  padding: 5px 12px;
  cursor: pointer;
}

.start-button:hover {
  background: rgba(255, 255, 255, 0.15);
}

.taskbar-windows {
  display: flex;
  align-items: center;
  gap: 5px;
}

.taskbar-window-button {
  background: rgba(80, 80, 80, 0.8);
  border: none;
  color: white;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 0.8em;
  cursor: pointer;
}

.taskbar-window-button:hover {
  background: rgba(255, 255, 255, 0.25);
}

/* RELOGIO */
#clock {
  cursor: pointer;
  text-align: right;
  font-size: 0.9em;
  line-height: 1.2;
  padding: 0 8px;
}

/* MENUS */
.menu, .admin-popup, .tools-popup {
  position: fixed;
  bottom: 45px;
  background: rgba(30, 30, 30, 0.95);
  color: white;
  border-radius: 8px;
  padding: 10px;
  width: 260px;
  display: none;
  z-index: 150;
}

.menu-item, .admin-popup a, .tools-popup a {
  display: flex;
  align-items: center;
  padding: 6px;
  border-radius: 6px;
  cursor: pointer;
  text-decoration: none;
  color: white;
}

.menu-item:hover, .admin-popup a:hover, .tools-popup a:hover {
  background: rgba(255, 255, 255, 0.15);
}

.menu-item img {
  width: 20px;
  height: 20px;
  margin-right: 8px;
}

/* JANELAS */
.window {
  position: absolute;
  top: 70px;
  left: 70px;
  width: 800px;
  height: 500px;
  background: white;
  border: 1px solid #666;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0,0,0,0.4);
  display: flex;
  flex-direction: column;
  resize: both;
  overflow: hidden;
  z-index: 300;
}

.window-header {
  background: #0078d7;
  color: white;
  padding: 6px 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: move;
  user-select: none;
}

.window-controls button {
  background: transparent;
  border: none;
  color: white;
  font-weight: bold;
  margin-left: 5px;
  cursor: pointer;
}

.window-toolbar {
  background: #f2f2f2;
  display: flex;
  gap: 5px;
  border-bottom: 1px solid #ccc;
  padding: 5px;
}

.window-toolbar button {
  border: none;
  background: #e0e0e0;
  border-radius: 4px;
  padding: 4px 8px;
  cursor: pointer;
}

.window-toolbar button:hover {
  background: #d0d0d0;
}

.window iframe {
  flex: 1;
  border: none;
}

/* LOGIN */
#login-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.8);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  z-index: 9999;
}

#login-screen button {
  padding: 10px 20px;
  background: #0078d7;
  border: none;
  color: white;
  border-radius: 6px;
  cursor: pointer;
  margin-top: 15px;
}

/* POPUP DO RELOGIO */
#clock-popup {
  position: fixed;
  bottom: 50px;
  right: 10px;
  width: 320px;
  background: rgba(40,40,40,0.95);
  color: white;
  border-radius: 8px;
  padding: 10px;
  display: none;
  z-index: 400;
}
#clock-popup iframe {
  width: 100%;
  height: 100px;
  border: none;
}
#clock-popup small {
  color: #ccc;
}
</style>
</head>
<body>

<div id="login-screen">
  <h2>Bem-vindo(a) ao Wiki Not Pedia WZZM</h2>
  <p>Faça login para acessar a área de trabalho</p>
  <button id="loginBtn">Entrar com Google</button>
</div>

<div id="desktop" style="display:none;">
  <div class="taskbar">
    <div class="taskbar-left">
      <button class="start-button" id="startBtn">Iniciar</button>
      <button class="start-button" id="adminBtn">Wiki Not Pédia</button>
      <button class="start-button" id="toolsBtn">Ferramentas</button>
    </div>
    <div class="taskbar-windows" id="taskbarWindows"></div>
    <div id="clock"></div>
  </div>

  <div class="menu" id="startMenu" style="left:10px;"></div>
  <div class="admin-popup" id="adminMenu" style="left:120px;"></div>
  <div class="tools-popup" id="toolsMenu" style="left:260px;"></div>

  <div id="clock-popup">
    <h4>Previsão do tempo</h4>
    <iframe src="https://wttr.in/?format=3"></iframe>
    <small>
      <b>Outros fusos horários:</b><br>
      Nova York: <span id="ny"></span><br>
      Londres: <span id="ldn"></span><br>
      Tóquio: <span id="tokyo"></span>
    </small>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyB9GkSqTIZ0kbVsba_WOdQeVAETrF9qna0",
  authDomain: "wzzm-ce3fc.firebaseapp.com",
  projectId: "wzzm-ce3fc",
  storageBucket: "wzzm-ce3fc.appspot.com",
  messagingSenderId: "249427877153",
  appId: "1:249427877153:web:0e4297294794a5aadeb260",
  measurementId: "G-PLKNZNFCQ8"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

const loginScreen = document.getElementById("login-screen");
const loginBtn = document.getElementById("loginBtn");
const desktop = document.getElementById("desktop");

loginBtn.addEventListener("click", ()=>signInWithPopup(auth, provider));

onAuthStateChanged(auth, (user)=>{
  if(user){
    loginScreen.style.display="none";
    desktop.style.display="block";
    updateClock();
  } else {
    loginScreen.style.display="flex";
    desktop.style.display="none";
  }
});

const startMenu=document.getElementById("startMenu");
const adminMenu=document.getElementById("adminMenu");
const toolsMenu=document.getElementById("toolsMenu");
const clock=document.getElementById("clock");
const clockPopup=document.getElementById("clock-popup");
const taskbarWindows=document.getElementById("taskbarWindows");

function updateClock(){
  const now=new Date();
  clock.innerHTML=`${now.toLocaleTimeString('pt-BR',{hour:'2-digit',minute:'2-digit'})}<br>${now.toLocaleDateString('pt-BR',{day:'2-digit',month:'2-digit'})}`;
  document.getElementById("ny").textContent=new Date().toLocaleTimeString("en-US",{timeZone:"America/New_York",hour:'2-digit',minute:'2-digit'});
  document.getElementById("ldn").textContent=new Date().toLocaleTimeString("en-GB",{timeZone:"Europe/London",hour:'2-digit',minute:'2-digit'});
  document.getElementById("tokyo").textContent=new Date().toLocaleTimeString("ja-JP",{timeZone:"Asia/Tokyo",hour:'2-digit',minute:'2-digit'});
  setTimeout(updateClock,1000);
}
clock.onclick=()=>clockPopup.style.display=clockPopup.style.display==="block"?"none":"block";

/* Botões dos menus */
startBtn.onclick=()=>toggleMenu(startMenu);
adminBtn.onclick=()=>toggleMenu(adminMenu);
toolsBtn.onclick=()=>toggleMenu(toolsMenu);

function toggleMenu(menu){
  [startMenu,adminMenu,toolsMenu].forEach(m=>{ if(m!==menu) m.style.display="none"; });
  menu.style.display=menu.style.display==="block"?"none":"block";
}

/* MENU ITENS */
const startItems=[
        { name: 'Termos de Serviço', url: 'Termos%20de%20Servi%C3%A7o.pdf', iconUrl: 'iconmagic.png' },
        { name: 'Política de Privacidade', url: 'Pol%C3%ADtica%20de%20Privacidade.pdf', iconUrl: 'iconmagic.png' },
        { name: 'Area do colaborador', url: 'html/?uid=CKWtV1wmyHKNw6ie7qAh', iconUrl: 'iconmagic.png' },  
        { name: 'Area escolar', url: 'html/?uid=2yvd72xTNYB4RH3jv9jY', iconUrl: 'iconmagic.png' },  
        { name: 'Manual de Políticas de direito de privacidade ', url: 'pdf/?uid=TermosDeUsoWNP.pdf', iconUrl: 'iconmagic.png' },
        { name: 'Direito de privacidade a honra pessoal de WazzimaGiygg', url: 'https://wazzimagiygg.com/pdf/?uid=Termo%20de%20Ci%C3%AAncia%20e%20Acordo%20sobre%20Identidade%20e%20prote%C3%A7%C3%A3o%20moral%20e%20intelectual%20de%20WazzimaGiygg.pdf', iconUrl: 'iconmagic.png' }, 
        { name: 'Quem somos nós?', url: 'html/?uid=84TOyGBBxrsuzjWLyLwU', iconUrl: 'iconmagic.png' }, 
        { name: 'Blog Leia e Compreenda', url: 'https://leiacompreenda.blogspot.com/', iconUrl: 'iconmagic.png' },
        { name: 'Fale com a Administração', url: 'html/?uid=a13IwrEoc1Jmdi2I3Hve', iconUrl: 'iconmagic.png' },
        { name: 'Wiki Not Pedia', url: 'wnpx.html', iconUrl: 'iconmagic.png' },
        { name: 'Logoff (Sair)', action: 'logout', iconUrl: 'iconmagic.png' } //
    ];
startItems.forEach(it=>{
  const div=document.createElement("div");
  div.className="menu-item";
  div.textContent=it.name;
  div.onclick=()=>{ 
    if(it.action==="logout") signOut(auth);
    else openWindow(it.name,it.url);
    startMenu.style.display="none";
  };
  startMenu.appendChild(div);
});

const adminItems=[{name:'Chat (Contato)',url:'html/?uid=a13IwrEoc1Jmdi2I3Hve'}];
adminItems.forEach(it=>{
  const a=document.createElement("a");
  a.textContent=it.name;
  a.onclick=(e)=>{e.preventDefault();openWindow(it.name,it.url);adminMenu.style.display="none";};
  adminMenu.appendChild(a);
});

const toolItems=[
    const rawToolLinks = [
        { name: 'Procurar Artigos Cientificos', url: 'html/?uid=BMczNyGHmEsMJSHWJrF2' }, //BMczNyGHmEsMJSHWJrF2
        { name: 'Espaço Cliente', url: 'html/?uid=4rLaz9tcyoxZJYOVMf0s' }, //4rLaz9tcyoxZJYOVMf0s
        { name: 'Chat (Contato)', url: 'html/?uid=a13IwrEoc1Jmdi2I3Hve' },
        { name: 'Buscar Artigos WNP', url: 'ferramentasuteis.html' },
        { name: 'Acessórios', url: './tools/' },
        { name: 'Adicionar novo Artigo Wiki Not Pédia', url: 'html/?uid=p3RYhfyYqNDNjDP3KAFs' },
        { name: 'Editar artigos', url: 'html/?uid=6cbY8bU3BKFQdH8MWzjw' }, //6cbY8bU3BKFQdH8MWzjw
        { name: 'Editor na Base 44', url: 'https://wiki-zone-zero-mod-copy-2a26f6a1.base44.app' },
        { name: 'Upload de Imagem', url: 'html/?uid=RYln5EVrsPY9khlMvnfY' }, //p3RYhfyYqNDNjDP3KAFs
        { name: 'Upload PDF', url: 'html/?uid=BgeAuPIBfmJPxi5Xyy2v' }, //RYln5EVrsPY9khlMvnfY
        { name: 'Novo artigo cientifico', url: 'html/?uid=Bl8ZxEiAXxCIIw73xEEb' } //Bl8ZxEiAXxCIIw73xEEb

    ];
toolItems.forEach(it=>{
  const a=document.createElement("a");
  a.textContent=it.name;
  a.onclick=(e)=>{e.preventDefault();openWindow(it.name,it.url);toolsMenu.style.display="none";};
  toolsMenu.appendChild(a);
});

/* Funções de janela */
function createTaskButton(win,title){
  const btn=document.createElement("button");
  btn.className="taskbar-window-button";
  btn.textContent=title;
  btn.onclick=()=>win.style.display=win.style.display==="none"?"flex":"none";
  taskbarWindows.appendChild(btn);
  return btn;
}

function openWindow(title,url){
  const win=document.createElement("div");
  win.className="window";
  win.innerHTML=`
    <div class="window-header">
      <span>${title}</span>
      <div class="window-controls">
        <button class="minimize">—</button>
        <button class="maximize">⬜</button>
        <button class="close">✖</button>
      </div>
    </div>
    <div class="window-toolbar">
      <button class="back">⮌ Voltar</button>
      <button class="refresh">⟳ Atualizar</button>
      <button class="check">⚙ Verificar</button>
    </div>
    <iframe src="${url}"></iframe>
  `;
  document.body.appendChild(win);
  const iframe=win.querySelector("iframe");
  const header=win.querySelector(".window-header");
  const taskButton=createTaskButton(win,title);
  let isDrag=false,ox,oy,max=false,prev={};

  header.addEventListener("mousedown",e=>{isDrag=true;ox=e.clientX-win.offsetLeft;oy=e.clientY-win.offsetTop;});
  document.addEventListener("mousemove",e=>{if(isDrag&&!max){win.style.left=e.clientX-ox+"px";win.style.top=e.clientY-oy+"px";}});
  document.addEventListener("mouseup",()=>isDrag=false);

  win.querySelector(".close").onclick=()=>{taskButton.remove();win.remove();};
  win.querySelector(".minimize").onclick=()=>win.style.display="none";
  win.querySelector(".maximize").onclick=()=>{
    if(!max){prev={top:win.offsetTop,left:win.offsetLeft,w:win.offsetWidth,h:win.offsetHeight};
      win.style.top="0";win.style.left="0";win.style.width="100%";win.style.height="calc(100% - 40px)";max=true;
    } else {win.style.top=prev.top+"px";win.style.left=prev.left+"px";win.style.width=prev.w+"px";win.style.height=prev.h+"px";max=false;}
  };
  win.querySelector(".back").onclick=()=>iframe.contentWindow.history.back();
  win.querySelector(".refresh").onclick=()=>iframe.src=iframe.src;
  win.querySelector(".check").onclick=()=>alert("Página carregada com sucesso!");
}
</script>
</body>
</html>
