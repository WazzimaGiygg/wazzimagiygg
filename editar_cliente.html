// Função para notificar o sistema pai quando o cadastro for completado
function notifyRegistrationCompletion() {
    if (window.parent) {
        window.parent.postMessage({
            type: 'registrationCompleted',
            timestamp: Date.now(),
            userId: auth.currentUser?.uid
        }, '*');
        
        // Também notificar via localStorage
        localStorage.setItem('clientRegistrationComplete', 'true');
        localStorage.setItem('clientRegistrationDate', new Date().toISOString());
    }
}

// Chamar esta função quando o cadastro for salvo com sucesso
// Modifique a função saveClientData para incluir:
async function saveClientData() {
    // ... código existente ...
    
    if (success) {
        // Notificar sistema pai
        notifyRegistrationCompletion();
        
        // Redirecionar para informações do cliente
        setTimeout(() => {
            window.location.href = 'informacoes_cliente/?uid=' + currentClientId;
        }, 2000);
    }
}
