<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WZZM - Sistema Operacional Web</title>
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    
    <style>
        /* --------------------------------------------------------------------------------- */
        /* ESTILOS GERAIS */
        /* --------------------------------------------------------------------------------- */
        
        body {
            font-family: 'Noto Sans', sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden; 
        }
        
        #windows-desktop {
            width: 100vw;
            height: 100vh;
            background-color: #3f51b5; 
            background-image: linear-gradient(45deg, rgba(255,255,255,.05) 25%, transparent 25%, transparent 50%, rgba(255,255,255,.05) 50%, rgba(255,255,255,.05) 75%, transparent 75%, transparent);
            background-size: 40px 40px;
            position: relative;
            display: block; 
            box-sizing: border-box;
        }

        /* --------------------------------------------------------------------------------- */
        /* ÍCONES DO DESKTOP */
        /* --------------------------------------------------------------------------------- */
        #desktop-icons {
            position: absolute;
            top: 10px;
            left: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .desktop-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 80px;
            height: 80px;
            margin-bottom: 15px;
            text-align: center;
            color: white;
            text-shadow: 1px 1px 2px #000;
            cursor: pointer;
            user-select: none;
            transition: background-color 0.1s;
            padding: 5px;
            border: 1px solid transparent;
        }
        
        .desktop-icon:hover {
            background-color: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 5px;
        }

        .desktop-icon .material-icons {
            font-size: 40px;
            margin-bottom: 5px;
        }

        /* --------------------------------------------------------------------------------- */
        /* TASKBAR E START MENU */
        /* --------------------------------------------------------------------------------- */
        
        #windows-taskbar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background-color: #c0c0c0;
            border-top: 2px solid #fff;
            display: flex;
            align-items: center;
            padding: 0 5px;
            box-shadow: 0 -1px 3px rgba(0,0,0,0.5);
            z-index: 1000;
        }

        #start-button {
            position: relative; 
            background-color: #000080; 
            color: white;
            padding: 5px 10px;
            border-right: 2px solid #000;
            border-bottom: 2px solid #000;
            border-left: 2px solid #fff;
            border-top: 2px solid #fff;
            cursor: pointer;
            display: flex;
            align-items: center;
            font-weight: bold;
            margin-right: 10px;
            font-size: 0.9em;
        }

        #start-button.active {
            border-style: inset;
            border-color: #000 #fff #fff #000;
        }

        #start-menu {
            position: absolute;
            bottom: 40px; 
            left: 0;
            width: 280px; 
            background-color: #c0c0c0;
            border: 2px solid #fff;
            border-bottom: none;
            box-shadow: 4px 4px 0 #000;
            display: none; 
            flex-direction: column;
            z-index: 999;
        }

        .start-menu-item {
            padding: 8px 15px;
            display: flex;
            align-items: center;
            color: #000;
            text-decoration: none;
            cursor: pointer;
            transition: background-color 0.1s;
            white-space: nowrap; 
        }

        .start-menu-item:hover {
            background-color: #000080;
            color: white;
        }

        .start-menu-item .material-icons {
            margin-right: 10px;
            font-size: 20px;
        }
        
        .submenu-container {
            position: relative;
        }
        
        .submenu-container .start-menu-item.has-submenu {
            justify-content: space-between;
        }

        .submenu {
            position: absolute;
            left: 100%; 
            bottom: 0; 
            width: 350px; 
            background-color: #c0c0c0;
            border: 2px solid #fff;
            box-shadow: 4px 4px 0 #000;
            display: none; 
            flex-direction: column;
        }

        /* Submenus aninhados (Acessórios) devem aparecer à direita do item 'Acessórios' */
        .submenu-container .submenu-container .submenu {
            top: 0; 
            left: 100%;
            bottom: auto;
        }

        .submenu-container:hover > .submenu {
            display: flex;
        }

        .start-menu-divider {
            height: 2px;
            background-color: #808080;
            border-top: 1px solid #fff;
            margin: 5px 0;
        }

        /* --------------------------------------------------------------------------------- */
        /* JANELAS E IFRAME */
        /* --------------------------------------------------------------------------------- */

        .window-frame {
            position: absolute;
            background-color: #f0f0f0; 
            border: 1px solid #000;
            box-shadow: 5px 5px 10px rgba(0,0,0,0.5); 
            min-width: 300px;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            z-index: 10;
            resize: both; 
            overflow: hidden;
        }
        
        .window-content {
            padding: 0; 
            overflow: auto;
            flex-grow: 1;
            display: block;
        }
        
        .window-iframe-content {
             padding: 0;
             display: flex;
        }
        
        .window-iframe-content iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Estilos de barra de título e controles */
        .window-title-bar {
            background-color: #005fb8; 
            color: white;
            padding: 5px 10px;
            cursor: move; 
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            flex-shrink: 0;
            user-select: none;
        }

        .window-controls button {
            background-color: #c0c0c0;
            border: 1px solid #000;
            padding: 0 5px;
            margin-left: 5px;
            cursor: pointer;
            font-size: 1em;
            line-height: 1;
            width: 25px;
            height: 25px;
            font-weight: bold;
            box-shadow: 1px 1px 0 #000;
        }
        
        .window-controls button:active {
            box-shadow: inset 1px 1px 1px rgba(0,0,0,0.5);
        }

        .close-btn {
            background-color: #d32f2f !important;
            color: white;
            border-color: #9a0007;
        }
        
    </style>
</head>
<body>

    <div id="windows-desktop">
    
        <div id="desktop-icons">
            <div id="icon-artigos" class="desktop-icon" data-window-id="window-artigos">
                <span class="material-icons">folder</span>
                Artigos
            </div>
            <div id="icon-escolar" class="desktop-icon" data-window-id="window-escolar">
                <span class="material-icons">school</span>
                Área Escolar
            </div>
            <div id="icon-admin" class="desktop-icon" data-window-id="window-admin">
                <span class="material-icons">admin_panel_settings</span>
                Admin
            </div>

            <div id="icon-lixeira" class="desktop-icon" data-window-id="window-lixeira">
                <span class="material-icons">delete</span>
                Lixeira
            </div>
            <div id="icon-documentos" class="desktop-icon" data-window-id="window-documentos">
                <span class="material-icons">description</span>
                Documentos
            </div>
            <div id="icon-sobre" class="desktop-icon" data-window-id="window-sobre">
                <span class="material-icons">info</span>
                Sobre WNPX
            </div>
        </div>

        <div id="windows-taskbar">
            <button id="start-button">
                <span class="material-icons">laptop_windows</span> WZZM OS
            </button>
            
            <div id="start-menu">
                
                <div class="submenu-container">
                    <div class="start-menu-item has-submenu">
                        <span class="material-icons">apps</span> Programas <span class="material-icons" style="margin-left: auto;">chevron_right</span>
                    </div>
                    <div class="submenu">
                        <div class="start-menu-item" data-window-id="window-artigos">
                            <span class="material-icons">article</span> Artigos Recentes
                        </div>
                        <div class="start-menu-item" data-window-id="window-novo-artigo">
                            <span class="material-icons">add_box</span> Criar Artigo
                        </div>
                        <div class="start-menu-item" data-window-id="window-buscar-artigos">
                            <span class="material-icons">search</span> Buscar Artigos
                        </div>
                        
                        <div class="submenu-container">
                            <div class="start-menu-item has-submenu">
                                <span class="material-icons">build</span> Acessórios <span class="material-icons" style="margin-left: auto;">chevron_right</span>
                            </div>
                            <div class="submenu" style="width: 400px;"> 
                                <div class="start-menu-item" data-window-id="window-proc-artigos">
                                    <span class="material-icons">search</span> Procurar Artigos
                                </div>
                                <div class="start-menu-item" data-window-id="window-esp-cliente">
                                    <span class="material-icons">person_pin_circle</span> Espaço Cliente
                                </div>
                                <div class="start-menu-item" data-window-id="window-chat-contato">
                                    <span class="material-icons">chat</span> Chat (Contato)
                                </div>
                                <div class="start-menu-item" data-window-id="window-ferr-uteis">
                                    <span class="material-icons">article</span> Buscar Artigos WNP
                                </div>
                                <div class="start-menu-item" data-window-id="window-add-artigo">
                                    <span class="material-icons">add_box</span> Adicionar novo Artigo Wiki Not Pédia
                                </div>
                                <div class="start-menu-item" data-window-id="window-editar-artigos">
                                    <span class="material-icons">edit</span> Editar artigos
                                </div>
                                <div class="start-menu-item" data-window-id="window-editor-b44">
                                    <span class="material-icons">code</span> Editor na Base 44
                                </div>
                                <div class="start-menu-item" data-window-id="window-novo-cientifico">
                                    <span class="material-icons">science</span> Novo artigo cientifico
                                </div>
                                <div class="start-menu-item" data-window-id="window-antifake">
                                    <span class="material-icons">verified_user</span> Abrir canal antifake news
                                </div>
                                <div class="start-menu-item" data-window-id="window-relatorios">
                                    <span class="material-icons">visibility</span> Abrir canal de relatórios sobre investigações
                                </div>
                                <div class="start-menu-item" data-window-id="window-wiki-invest">
                                    <span class="material-icons">policy</span> Abrir canal de investigações (Wiki dominante)
                                </div>
                                <div class="start-menu-item" data-window-id="window-padrao-abnt">
                                    <span class="material-icons">rule</span> Padronização ABNT
                                </div>
                                <div class="start-menu-item" data-window-id="window-invest-veritas">
                                    <span class="material-icons">search_check</span> Investigação de veritas na Internet
                                </div>
                                <div class="start-menu-item" data-window-id="window-registro-ocorr">
                                    <span class="material-icons">report_problem</span> Registro de ocorrências em geral
                                </div>
                                <div class="start-menu-item" data-window-id="window-plagio">
                                    <span class="material-icons">copyright</span> Verificador externo de plágio
                                </div>
                                <div class="start-menu-item" data-window-id="window-editor-html">
                                    <span class="material-icons">html</span> Editor de Artigo HTML
                                </div>
                                <div class="start-menu-item" data-window-id="window-preview">
                                    <span class="material-icons">palette</span> Preview Workspace
                                </div>
                            </div>
                        </div>
                        <div class="start-menu-item" data-window-id="window-termos">
                            <span class="material-icons">gavel</span> Termos de Serviço
                        </div>
                         <div class="start-menu-item" data-window-id="window-privacidade">
                            <span class="material-icons">security</span> Política de Privacidade
                        </div>
                        <div class="start-menu-item" data-window-id="window-colaborador">
                            <span class="material-icons">work</span> Área do Colaborador
                        </div>
                        <div class="start-menu-item" data-window-id="window-escolar">
                            <span class="material-icons">school</span> Área Escolar
                        </div>
                        <div class="start-menu-item" data-window-id="window-manual">
                            <span class="material-icons">menu_book</span> Manual de Políticas...
                        </div>
                         <div class="start-menu-item" data-window-id="window-direito">
                            <span class="material-icons">privacy_tip</span> Direito de privacidade...
                        </div>
                         <div class="start-menu-item" data-window-id="window-quemsomos">
                            <span class="material-icons">group</span> Quem somos nós?
                        </div>
                        <div class="start-menu-item" data-window-id="window-blog">
                            <span class="material-icons">rss_feed</span> Blog Leia e Compreenda
                        </div>
                        <div class="start-menu-item" data-window-id="window-contato">
                            <span class="material-icons">mail</span> Fale com a Administração
                        </div>
                         <div class="start-menu-item" data-window-id="window-busca-avancada">
                            <span class="material-icons">filter_alt</span> Busca Avançada
                        </div>
                        </div>
                </div>

                <div class="start-menu-item" data-window-id="window-configuracoes">
                    <span class="material-icons">settings</span> Configurações
                </div>

                <div class="start-menu-item" data-window-id="window-pagina-usuario">
                    <span class="material-icons">account_circle</span> Usuário
                </div>
                
                <div class="start-menu-divider"></div>
                
                <div id="start-menu-logout" class="start-menu-item">
                    <span class="material-icons">power_settings_new</span> Desligar
                </div>
            </div>

            <div class="taskbar-apps">
                </div>
        </div>

        <div id="windows-container">

            <div id="window-artigos" class="window-frame" style="display: none;">
                <div class="window-title-bar">
                    <span class="window-title">WikiNotpedia - wazzimagiygg.com</span>
                    <div class="window-controls">
                        <button class="control-button minimize-btn" title="Minimizar">_</button>
                        <button class="control-button close-btn" title="Fechar">X</button>
                    </div>
                </div>
                <div class="window-content window-iframe-content">
                    <iframe id="artigos-iframe" src="https://wazzimagiygg.com/wikinotpedia.html" frameborder="0"></iframe>
                </div>
            </div>
            
            <div id="window-escolar" class="window-frame" style="display: none;">
                <div class="window-title-bar">
                    <span class="window-title">Área Escolar</span>
                    <div class="window-controls">
                        <button class="control-button minimize-btn" title="Minimizar">_</button>
                        <button class="control-button close-btn" title="Fechar">X</button>
                    </div>
                </div>
                <div class="window-content window-iframe-content">
                    <iframe src="https://wazzimagiygg.com/desktop/escolar/index.html" frameborder="0"></iframe>
                </div>
            </div>
            
            <div id="window-admin" class="window-frame" style="display: none;">
                <div class="window-title-bar">
                    <span class="window-title">Painel Administrativo</span>
                    <div class="window-controls">
                        <button class="control-button minimize-btn" title="Minimizar">_</button>
                        <button class="control-button close-btn" title="Fechar">X</button>
                    </div>
                </div>
                <div class="window-content window-iframe-content">
                    <iframe src="https://wazzimagiygg.com/desktop/admin/index.html" frameborder="0"></iframe>
                </div>
            </div>
            
            <div id="window-lixeira" class="window-frame" data-content-id="lixeira-pane" style="width: 400px; height: 300px; left: 150px; top: 100px; display: none;">
                <div class="window-title-bar">
                    <span class="window-title">Lixeira</span>
                    <div class="window-controls">
                        <button class="control-button minimize-btn" title="Minimizar">_</button>
                        <button class="control-button close-btn" title="Fechar">X</button>
                    </div>
                </div>
                <div class="window-content" style="padding: 10px;">
                    <p>A lixeira está vazia.</p>
                    <p>Itens removidos apareceriam aqui.</p>
                </div>
            </div>
            
            <div id="window-documentos" class="window-frame" data-content-id="documentos-pane" style="width: 600px; height: 400px; left: 100px; top: 150px; display: none;">
                <div class="window-title-bar">
                    <span class="window-title">Documentos</span>
                    <div class="window-controls">
                        <button class="control-button minimize-btn" title="Minimizar">_</button>
                        <button class="control-button close-btn" title="Fechar">X</button>
                    </div>
                </div>
                <div class="window-content" style="padding: 10px;">
                    <h3>Meus Documentos</h3>
                    <ul id="documentos-list">
                        <li><span class="material-icons">folder_open</span> Configurações de Usuário</li>
                        <li><span class="material-icons">insert_drive_file</span> Meu Artigo Rascunho.txt</li>
                        <li><span class="material-icons">cloud</span> Backups na Nuvem</li>
                    </ul>
                </div>
            </div>

            <div id="window-sobre" class="window-frame" data-content-id="sobre-pane" style="width: 350px; height: 250px; left: 200px; top: 50px; display: none;">
                <div class="window-title-bar">
                    <span class="window-title">Sobre o WNPX</span>
                    <div class="window-controls">
                        <button class="control-button minimize-btn" title="Minimizar">_</button>
                        <button class="control-button close-btn" title="Fechar">X</button>
                    </div>
                </div>
                <div class="window-content" style="padding: 10px; text-align: center;">
                    <span class="material-icons" style="font-size: 50px; color: #3f51b5;">laptop_windows</span>
                    <h3>WZZM OS v1.0</h3>
                    <p>Sistema Operacional Web para gerenciamento de Artigos.</p>
                    <p>&copy; 2024 - Todos os direitos reservados.</p>
                </div>
            </div>
            
            <div id="window-configuracoes" class="window-frame" data-content-id="configuracoes-pane" style="width: 500px; height: 400px; left: 250px; top: 200px; display: none;">
                <div class="window-title-bar">
                    <span class="window-title">Configurações do Sistema</span>
                    <div class="window-controls">
                        <button class="control-button minimize-btn" title="Minimizar">_</button>
                        <button class="control-button close-btn" title="Fechar">X</button>
                    </div>
                </div>
                <div class="window-content" style="padding: 10px;">
                    <h2>Configurações</h2>
                    <p>Opções de temas, notificações e permissões do sistema.</p>
                    <div class="mdl-switch mdl-js-switch mdl-js-ripple-effect">
                        <input type="checkbox" id="switch-dark-mode" class="mdl-switch__input">
                        <label class="mdl-switch__label" for="switch-dark-mode">Modo Escuro (Em Breve)</label>
                    </div>
                </div>
            </div>
            
            <div id="window-novo-artigo" class="window-frame" data-content-id="novo-artigo" style="width: 600px; height: 550px; left: 150px; top: 150px; display: none;">
                 <div class="window-title-bar">
                    <span class="window-title">Criar Novo Artigo - WZZM</span>
                    <div class="window-controls">
                        <button class="control-button minimize-btn" title="Minimizar">_</button>
                        <button class="control-button close-btn" title="Fechar">X</button>
                    </div>
                </div>
                <div class="window-content" style="padding: 10px;">
                    <div id="novo-artigo" class="content-pane" style="display: block;">
                        <form id="form-novo-artigo"><h2>Criar Novo Artigo</h2></form>
                    </div>
                </div>
            </div>
            
             <div id="window-pagina-usuario" class="window-frame" data-content-id="pagina-usuario" style="width: 700px; height: 550px; left: 200px; top: 200px; display: none;">
                <div class="window-title-bar">
                    <span class="window-title" id="user-window-title">Meu Perfil - WZZM</span>
                    <div class="window-controls">
                        <button class="control-button minimize-btn" title="Minimizar">_</button>
                        <button class="control-button close-btn" title="Fechar">X</button>
                    </div>
                </div>
                <div class="window-content" style="padding: 10px;">
                    <div id="pagina-usuario" class="content-pane" style="display: block;">
                         <div class="user-header"> 
                            <h1 id="user-display-name" style="margin: 0;">Usuário Local</h1> 
                            <p id="user-role" style="color: #72777d; margin: 5px 0 0 0;">Cargo: Administrador Simulado</p>
                            <div class="user-tabs" style="margin-top: 1em;"> 
                                <button class="tab-button active" data-tab="contribuicoes">Minhas Contribuições</button> 
                                <button class="tab-button" data-tab="pagina-pessoal">Página Pessoal</button> 
                                <button class="tab-button" data-tab="discussao">Discussão</button> 
                            </div> 
                        </div>  
                        <div id="contribuicoes-tab" class="tab-content" style="display: block;"> <h3 style="margin-top: 0;">Últimas Contribuições</h3> <ul id="contribuicoesLista"> <p style="text-align: center; color: #888;">Nenhuma contribuição no modo offline.</p> </ul> </div>  
                        <div id="pagina-pessoal-tab" class="tab-content" style="display: none;"> <h3 style="margin-top: 0;">Minha Página</h3> <textarea id="pagina-pessoal-textarea" rows="20"></textarea> <div style="margin-top: 10px;"> <button id="salvar-pagina-pessoal">Salvar</button> <button id="cancelar-pagina-pessoal">Cancelar</button> </div> </div>  
                        <div id="discussao-tab" class="tab-content" style="display: none;"> <h3 style="margin-top: 0;">Mensagens e Notificações</h3> <div id="lista-mensagens"> <p style="text-align: center; color: #888;">Nenhuma mensagem nova.</p> </div> </div>
                    </div>
                </div>
            </div>


            <div id="window-termos" class="window-frame" style="width: 700px; height: 500px; left: 50px; top: 50px; display: none; transform: none;">
                <div class="window-title-bar"><span class="window-title">Termos de Serviço</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://wazzimagiygg.com/Termos%20de%20Servi%C3%A7o.pdf" frameborder="0"></iframe></div>
            </div>
            <div id="window-privacidade" class="window-frame" style="width: 700px; height: 500px; left: 70px; top: 70px; display: none; transform: none;">
                <div class="window-title-bar"><span class="window-title">Política de Privacidade</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://wazzimagiygg.com/Pol%C3%ADtica%20de%20Privacidade.pdf" frameborder="0"></iframe></div>
            </div>
            <div id="window-colaborador" class="window-frame" style="width: 600px; height: 400px; left: 100px; top: 100px; display: none; transform: none;">
                <div class="window-title-bar"><span class="window-title">Área do Colaborador</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://wazzimagiygg.com/html/?uid=CKWtV1wmyHKNw6ie7qAh" frameborder="0"></iframe></div>
            </div>
            <div id="window-manual" class="window-frame" style="width: 750px; height: 600px; left: 120px; top: 120px; display: none; transform: none;">
                <div class="window-title-bar"><span class="window-title">Manual de Políticas</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://wazzimagiygg.com/html/?uid=F5CmMQDbrTpipTZoqd2x" frameborder="0"></iframe></div>
            </div>
            <div id="window-direito" class="window-frame" style="width: 750px; height: 600px; left: 140px; top: 140px; display: none; transform: none;">
                <div class="window-title-bar"><span class="window-title">Direito de Privacidade</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://wazzimagiygg.com/html/?uid=ik1hWPxqHKLjA13MIqVW" frameborder="0"></iframe></div>
            </div>
            <div id="window-quemsomos" class="window-frame" style="width: 500px; height: 350px; left: 160px; top: 160px; display: none; transform: none;">
                <div class="window-title-bar"><span class="window-title">Quem Somos Nós?</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://wazzimagiygg.com/html/?uid=84TOyGBBxrsuzjWLyLwU" frameborder="0"></iframe></div>
            </div>
            <div id="window-blog" class="window-frame" style="width: 800px; height: 600px; left: 180px; top: 180px; display: none; transform: none;">
                <div class="window-title-bar"><span class="window-title">Blog Leia e Compreenda</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://leiacompreenda.blogspot.com/" frameborder="0"></iframe></div>
            </div>
            <div id="window-contato" class="window-frame" style="width: 500px; height: 400px; left: 200px; top: 200px; display: none; transform: none;">
                <div class="window-title-bar"><span class="window-title">Fale com a Administração</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="contato/" frameborder="0"></iframe></div>
            </div>

            <div id="window-proc-artigos" class="window-frame" style="width: 600px; height: 450px; left: 220px; top: 220px; display: none;">
                <div class="window-title-bar"><span class="window-title">Procurar Artigos</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="recepcao.html" frameborder="0"></iframe></div>
            </div>
            <div id="window-esp-cliente" class="window-frame" style="width: 600px; height: 450px; left: 240px; top: 240px; display: none;">
                <div class="window-title-bar"><span class="window-title">Espaço Cliente</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="./cw22.html" frameborder="0"></iframe></div>
            </div>
            <div id="window-chat-contato" class="window-frame" style="width: 600px; height: 450px; left: 260px; top: 260px; display: none;">
                <div class="window-title-bar"><span class="window-title">Chat (Contato)</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="contato.html" frameborder="0"></iframe></div>
            </div>
            <div id="window-ferr-uteis" class="window-frame" style="width: 600px; height: 450px; left: 280px; top: 280px; display: none;">
                <div class="window-title-bar"><span class="window-title">Buscar Artigos WNP</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="ferramentasuteis.html" frameborder="0"></iframe></div>
            </div>
            <div id="window-add-artigo" class="window-frame" style="width: 600px; height: 450px; left: 300px; top: 300px; display: none;">
                <div class="window-title-bar"><span class="window-title">Adicionar novo Artigo Wiki Not Pédia</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="adicaoavancada/" frameborder="0"></iframe></div>
            </div>
            <div id="window-editar-artigos" class="window-frame" style="width: 600px; height: 450px; left: 320px; top: 320px; display: none;">
                <div class="window-title-bar"><span class="window-title">Editar artigos</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="alt/" frameborder="0"></iframe></div>
            </div>
            <div id="window-editor-b44" class="window-frame" style="width: 800px; height: 600px; left: 340px; top: 340px; display: none;">
                <div class="window-title-bar"><span class="window-title">Editor na Base 44</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://wiki-zone-zero-mod-copy-2a26f6a1.base44.app" frameborder="0"></iframe></div>
            </div>
            <div id="window-novo-cientifico" class="window-frame" style="width: 600px; height: 450px; left: 360px; top: 360px; display: none;">
                <div class="window-title-bar"><span class="window-title">Novo artigo cientifico</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="novoartigo/" frameborder="0"></iframe></div>
            </div>
            <div id="window-antifake" class="window-frame" style="width: 800px; height: 600px; left: 380px; top: 380px; display: none;">
                <div class="window-title-bar"><span class="window-title">Abrir canal antifake news</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://veritas-ai-f7c564f8.base44.app/" frameborder="0"></iframe></div>
            </div>
            <div id="window-relatorios" class="window-frame" style="width: 800px; height: 600px; left: 400px; top: 400px; display: none;">
                <div class="window-title-bar"><span class="window-title">Abrir canal de relatórios sobre investigações</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://sentinela-09d29cc0.base44.app/Dashboard/" frameborder="0"></iframe></div>
            </div>
            <div id="window-wiki-invest" class="window-frame" style="width: 800px; height: 600px; left: 420px; top: 420px; display: none;">
                <div class="window-title-bar"><span class="window-title">Abrir canal de investigações</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://wiki-watch-c9ef4323.base44.app/" frameborder="0"></iframe></div>
            </div>
            <div id="window-padrao-abnt" class="window-frame" style="width: 800px; height: 600px; left: 440px; top: 440px; display: none;">
                <div class="window-title-bar"><span class="window-title">Padronização ABNT</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://quali-track-de9a4ada.base44.app/" frameborder="0"></iframe></div>
            </div>
            <div id="window-invest-veritas" class="window-frame" style="width: 800px; height: 600px; left: 460px; top: 460px; display: none;">
                <div class="window-title-bar"><span class="window-title">Investigação de veritas na Internet</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://veritas-d7781517.base44.app/" frameborder="0"></iframe></div>
            </div>
            <div id="window-registro-ocorr" class="window-frame" style="width: 800px; height: 600px; left: 480px; top: 480px; display: none;">
                <div class="window-title-bar"><span class="window-title">Registro de ocorrências em geral</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://event-guard-4eee598e.base44.app/" frameborder="0"></iframe></div>
            </div>
            <div id="window-plagio" class="window-frame" style="width: 800px; height: 600px; left: 500px; top: 500px; display: none;">
                <div class="window-title-bar"><span class="window-title">Verificador externo de plágio</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://originality-guard-ef12748b.base44.app" frameborder="0"></iframe></div>
            </div>
            <div id="window-editor-html" class="window-frame" style="width: 800px; height: 600px; left: 520px; top: 520px; display: none;">
                <div class="window-title-bar"><span class="window-title">Editor de Artigo HTML</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://app--wiki-zone-zero-mod-e98820b7.base44.app/" frameborder="0"></iframe></div>
            </div>
            <div id="window-preview" class="window-frame" style="width: 800px; height: 600px; left: 540px; top: 540px; display: none;">
                <div class="window-title-bar"><span class="window-title">Preview Workspace</span><div class="window-controls"><button class="control-button minimize-btn" title="Minimizar">_</button><button class="control-button close-btn" title="Fechar">X</button></div></div>
                <div class="window-content window-iframe-content"><iframe src="https://app.base44.com/apps/68e9a4aa3b54569260c4df7c/editor/preview/Workspace" frameborder="0"></iframe></div>
            </div>
        </div>
    </div>
    
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
    <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    
    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // Elementos da interface
        const windowsDesktop = document.getElementById('windows-desktop');
        const startButton = document.getElementById('start-button');
        const startMenu = document.getElementById('start-menu');
        const startMenuLogout = document.getElementById('start-menu-logout');
        const desktopIcons = document.querySelectorAll('.desktop-icon');
        const taskbarApps = document.querySelector('.taskbar-apps');
        
        // IDs das janelas que devem abrir em TELA CHEIA
        const FULLSCREEN_WINDOWS = ['window-artigos', 'window-escolar', 'window-admin'];

        let zIndexCounter = 10;
        let activeWindow = null;

        // --- FUNÇÕES DE GERENCIAMENTO DE JANELAS ---
        
        function bringToFront(windowElement) {
            if (activeWindow && activeWindow !== windowElement) {
                // Remove o destaque do botão anterior
                const oldWindowId = activeWindow.id;
                const oldTaskbarItem = taskbarApps.querySelector(`[data-window-id="${oldWindowId}"]`);
                if (oldTaskbarItem) {
                    oldTaskbarItem.classList.remove('active');
                }
            }

            zIndexCounter++;
            windowElement.style.zIndex = zIndexCounter;
            activeWindow = windowElement;

            // Adiciona o destaque ao novo botão ativo
            const windowId = windowElement.id;
            const taskbarButton = taskbarApps.querySelector(`[data-window-id="${windowId}"]`);
            if (taskbarButton) {
                taskbarButton.classList.add('active');
            }
        }

        function createOrGetTaskbarItem(windowId, windowTitle) {
            let item = taskbarApps.querySelector(`[data-window-id="${windowId}"]`);
            if (!item) {
                item = document.createElement('button');
                item.className = 'taskbar-item';
                item.setAttribute('data-window-id', windowId);
                item.textContent = windowTitle;
                item.addEventListener('click', () => {
                    const windowElement = document.getElementById(windowId);
                    if (windowElement.style.display === 'flex' && activeWindow === windowElement) {
                        // Minimizar
                        windowElement.style.display = 'none';
                        item.classList.remove('active');
                        activeWindow = null;
                    } else {
                        // Restaurar ou trazer para frente
                        windowElement.style.display = 'flex';
                        bringToFront(windowElement);
                    }
                });
                taskbarApps.appendChild(item);
            }
            return item;
        }

        function openWindow(windowId) {
            const windowElement = document.getElementById(windowId);
            if (!windowElement) return;

            const titleSpan = windowElement.querySelector('.window-title');
            const windowTitle = titleSpan ? titleSpan.textContent.replace(' - WZZM', '') : windowId;
            const taskbarHeight = 40; 
            const desktopHeight = windowsDesktop.clientHeight;

            // **Lógica de Tela Cheia com correção de viewport para mobile**
            if (FULLSCREEN_WINDOWS.includes(windowId)) {
                
                // Tenta forçar o modo desktop explicitando um tamanho mínimo grande
                // Isso pode convencer o conteúdo interno do iframe a sair do modo mobile
                windowElement.style.minWidth = '1024px';
                windowElement.style.minHeight = '768px';
                
                // Configuração de tela cheia
                windowElement.style.width = '100%';
                windowElement.style.height = (desktopHeight - taskbarHeight) + 'px';
                windowElement.style.top = '0';
                windowElement.style.left = '0';
                windowElement.style.transform = 'none'; 
                windowElement.style.resize = 'none'; 
            } else {
                 // Lógica de janela padrão (redimensionável)
                 windowElement.style.minWidth = '300px';
                 windowElement.style.minHeight = '200px';
                 
                 if (!windowElement.style.transform || windowElement.style.transform === 'none') {
                    windowElement.style.left = '50%';
                    windowElement.style.top = '50%';
                    windowElement.style.transform = 'translate(-50%, -50%)';
                 }
                 windowElement.style.resize = 'both';
            }


            windowElement.style.display = 'flex';
            
            createOrGetTaskbarItem(windowId, windowTitle);
            bringToFront(windowElement);
        }
        
        function closeWindow(windowElement) {
            const windowId = windowElement.id;
            windowElement.style.display = 'none';

            const taskbarItem = taskbarApps.querySelector(`[data-window-id="${windowId}"]`);
            if (taskbarItem) {
                taskbarItem.remove();
            }
            if (activeWindow === windowElement) {
                activeWindow = null;
            }
        }

        function makeWindowDraggableAndResizable(windowElement) {
            const titleBar = windowElement.querySelector('.window-title-bar');
            
            // Lógica de Arrastar e trazer para frente
            windowElement.addEventListener('mousedown', (e) => {
                 const isControl = e.target.closest('button, input, textarea, select');
                if (!isControl) {
                    bringToFront(windowElement);
                }
            });

            titleBar.addEventListener('mousedown', (e) => {
                if (e.target.tagName !== 'BUTTON') {
                    bringToFront(windowElement);
                    e.preventDefault();
                    let shiftX = e.clientX - windowElement.getBoundingClientRect().left;
                    let shiftY = e.clientY - windowElement.getBoundingClientRect().top;

                    function moveAt(pageX, pageY) {
                        let newLeft = pageX - shiftX;
                        let newTop = pageY - shiftY;
                        
                        const desktop = document.getElementById('windows-desktop');
                        const desktopRect = desktop.getBoundingClientRect();
                        
                        // Limites (ajustado para a barra de tarefas)
                        if (newLeft < -windowElement.offsetWidth + 50) newLeft = -windowElement.offsetWidth + 50;
                        if (newTop < 0) newTop = 0;
                        if (newLeft + windowElement.offsetWidth > desktopRect.width) newLeft = desktopRect.width - windowElement.offsetWidth;
                        if (newTop + windowElement.offsetHeight > desktopRect.height - 40) newTop = desktopRect.height - 40; 

                        windowElement.style.left = newLeft + 'px';
                        windowElement.style.top = newTop + 'px';
                        windowElement.style.transform = 'none'; // Remove centralização
                    }

                    function onMouseMove(e) { moveAt(e.pageX, e.pageY); }
                    document.addEventListener('mousemove', onMouseMove);
                    titleBar.onmouseup = function() {
                        document.removeEventListener('mousemove', onMouseMove);
                        titleBar.onmouseup = null;
                    };
                }
            });
            titleBar.ondragstart = () => false; 

            // Lógica de Controles
            windowElement.querySelector('.close-btn').addEventListener('click', () => {
                closeWindow(windowElement);
            });
            
            windowElement.querySelector('.minimize-btn').addEventListener('click', () => {
                windowElement.style.display = 'none';
                const taskbarButton = taskbarApps.querySelector(`[data-window-id="${windowElement.id}"]`);
                if(taskbarButton) taskbarButton.classList.remove('active'); 
                if (activeWindow === windowElement) activeWindow = null;
            });
        }
        
        // --- INICIALIZAÇÃO DA INTERFACE ---

        // 1. Inicializa todas as janelas para serem arrastáveis/redimensionáveis
        document.querySelectorAll('.window-frame').forEach(makeWindowDraggableAndResizable);

        // 2. Lógica do Menu Iniciar
        startButton.addEventListener('click', (e) => {
            e.stopPropagation(); 
            startMenu.style.display = startMenu.style.display === 'flex' ? 'none' : 'flex';
            startButton.classList.toggle('active', startMenu.style.display === 'flex');
        });

        document.addEventListener('click', (e) => {
            if (startMenu.style.display === 'flex' && !startButton.contains(e.target) && !startMenu.contains(e.target)) {
                startMenu.style.display = 'none';
                startButton.classList.remove('active');
            }
        });

        // 3. Abrir Janelas pelo Menu Iniciar (Clique Simples)
        document.querySelectorAll('#start-menu .start-menu-item').forEach(item => {
            item.addEventListener('click', (e) => {
                const windowId = e.currentTarget.getAttribute('data-window-id');
                if (windowId) {
                    openWindow(windowId);
                }
                // Fecha o menu principal e submenus (se for um item folha)
                if(!e.currentTarget.classList.contains('has-submenu')){
                    startMenu.style.display = 'none';
                    startButton.classList.remove('active');
                }
            });
        });

        // 4. Abrir Janelas pelos Ícones do Desktop (Clique Simples)
        desktopIcons.forEach(icon => {
            icon.addEventListener('click', (e) => { 
                const windowId = e.currentTarget.getAttribute('data-window-id');
                if (windowId) {
                    openWindow(windowId);
                }
            });
        });
        
        // 5. Simulação de Desligar/Sair
        startMenuLogout.addEventListener('click', () => {
             alert('Simulando o desligamento do sistema...');
             windowsDesktop.style.display = 'none';
        });
        
        // 6. Inicia a janela de Artigos (iframe) ao carregar
        openWindow('window-artigos'); 
        
    });
    </script>

</body>
</html>
