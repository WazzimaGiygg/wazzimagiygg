<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <style>
        body { 
            margin: 0; 
            padding: 15px; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: #1e1e1e; 
            color: #e0e0e0; 
            line-height: 1.5;
        }
        .container-rodape {
            border-left: 4px solid #007bff;
            padding-left: 15px;
        }
        /* Estilo para os links que você quer inserir */
        a { 
            color: #4dabf7; 
            text-decoration: none; 
            font-weight: bold;
        }
        a:hover { text-decoration: underline; }
        
        .json-raw { 
            margin-top: 15px;
            font-family: monospace; 
            background: #000; 
            padding: 10px; 
            font-size: 11px; 
            color: #0f0;
            border-radius: 5px;
        }
    </style>
</head>
<body>

    <div class="container-rodape" id="conteudo">
        Carregando informações do rodapé...
    </div>

    <div class="json-raw" id="json-debug"></div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyB9GkSqTIZ0kbVsba_WOdQeVAETrF9qna0",
            authDomain: "wzzm-ce3fc.firebaseapp.com",
            projectId: "wzzm-ce3fc",
            storageBucket: "wzzm-ce3fc.appspot.com",
            messagingSenderId: "249427877153",
            appId: "1:249427877153:web:0e4297294794a5aadeb260"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        async function carregarRodape() {
            const urlParams = new URLSearchParams(window.location.search);
            const uid = urlParams.get('uid');
            const display = document.getElementById('conteudo');
            const debug = document.getElementById('json-debug');

            if (!uid) {
                display.innerHTML = "Erro: UID não fornecido.";
                return;
            }

            try {
                // Busca o documento na coleção onde você salvou (ex: 'rodapes_registrados')
                const doc = await db.collection('rodapes_registrados').doc(uid).get();

                if (doc.exists) {
                    const dados = doc.data();
                    
                    // 1. Exibe o JSON bruto para depuração (opcional)
                    debug.textContent = "JSON Data: " + JSON.stringify(dados, null, 2);

                    // 2. Processa o texto para permitir links HTML
                    // Se você salvar o texto com tags <a href="...">, o innerHTML vai renderizar
                    display.innerHTML = dados.assinatura; 

                } else {
                    display.innerHTML = "Rodapé não encontrado.";
                }
            } catch (error) {
                console.error(error);
                display.innerHTML = "Erro ao carregar dados.";
            }
        }

        window.onload = carregarRodape;
    </script>
</body>
</html>
