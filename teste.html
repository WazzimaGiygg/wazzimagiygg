<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wiki Not Pedia WZZM</title>
    <link rel="icon" href="favicom.png" type="image/x-icon">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMDJ8uR2YMIpM44B5lG7x088001WvR4F/17V4G0+4k3VzYFw8E/z04q9x72z7c+Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
            margin: 0;
            /* SEU PLANO DE FUNDO EST√Å DEFINIDO AQUI: */
            background: url('condedmonddant√®s.png') center/cover no-repeat;
            font-family: 'Segoe UI', sans-serif;
            height: 100vh;
            overflow: hidden;
        }

        /* Barra de tarefas */
        .taskbar {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40px;
            background: rgba(20, 20, 20, 0.8);
            display: flex;
            align-items: center;
            /* Adicionado espa√ßo entre elementos na taskbar */
            justify-content: space-between; 
            padding: 0 10px;
            color: white;
            box-sizing: border-box;
        }

        /* Container dos bot√µes Iniciar, Admin e Ferramentas */
        .taskbar-left { /* Alterado para incluir o novo bot√£o */
            display: flex;
            align-items: center;
        }
        
        /* Estilo para o rel√≥gio na direita */
        #clock {
            padding: 0 10px;
            text-align: right;
            line-height: 1.2;
            font-size: 0.85em;
        }

        .start-button {
            background: rgba(40, 40, 40, 0.9);
            border: none;
            color: white;
            padding: 5px 15px;
            margin-right: 10px;
            border-radius: 6px;
            cursor: pointer;
        }

        .menu {
            position: absolute;
            bottom: 40px;
            left: 10px;
            background: rgba(30, 30, 30, 0.95);
            color: white;
            border-radius: 8px;
            padding: 10px;
            width: 280px;
            display: none;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 6px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .menu-item:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* 2. NOVO CSS PARA √çCONES FONT AWESOME NO MENU INICIAR */
        .menu-item i {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            text-align: center; /* Centraliza o √≠cone (opcional) */
            line-height: 20px; /* Alinha verticalmente o √≠cone (opcional) */
            font-size: 1.1em; /* Ajusta o tamanho do √≠cone */
        }
        /* REMOVIDO: .menu-item img, pois estamos usando <i> */

        .window {
            position: absolute;
            top: 60px;
            left: 60px;
            width: 800px;
            height: 500px;
            background: white;
            border: 1px solid #666;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
            display: flex;
            flex-direction: column;
            resize: both;
            overflow: hidden;
            border-radius: 8px;
            z-index: 100; /* Garante que a janela fique sobre os menus */
        }

        .window-header {
            background: #0078d7;
            color: white;
            padding: 6px 10px;
            cursor: move;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
        }

        .window-controls button {
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            font-weight: bold;
            margin-left: 5px;
        }

        .window iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Tela de login */
        #login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 9999;
        }

        #login-screen h2 {
            /* T√≠tulo alterado no HTML */
        }

        #login-screen p {
            /* Par√°grafo alterado no HTML */
        }

        #login-screen button {
            padding: 10px 20px;
            background: #0078d7;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 15px;
        }

        /* Popup admin e novo popup ferramentas */
        .admin-popup, .tools-popup { /* Adicionado .tools-popup */
            position: absolute;
            bottom: 50px;
            /* Ajuste o left para posicionar os menus de forma coerente */
            left: 100px; /* Ser√° ajustado para o tools-popup no JS */
            width: 320px;
            background: rgba(40, 40, 40, 0.95);
            color: white;
            border-radius: 8px;
            padding: 10px;
            display: none;
        }
        
        /* NOVO: Estilo para o menu de ferramentas para garantir que os links se pare√ßam com itens de menu */
        .tools-popup a {
            display: block;
            color: white;
            padding: 6px;
            border-radius: 6px;
            text-decoration: none;
            margin-bottom: 2px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .tools-popup a:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        .taskbar-right {
            display: flex; /* Permite alinhar o √≠cone e o rel√≥gio */
            align-items: center;
        }

        /* Estilo para o √çcone de Notifica√ß√£o */
        #notificationIcon {
            cursor: pointer;
            font-size: 1.2em; /* Tamanho do √≠cone (pode ser um üîî ou outro caractere) */
            margin-right: 15px; /* Espa√ßo entre o √≠cone e o rel√≥gio */
            transition: color 0.2s;
            color: white;
        }

        #notificationIcon:hover {
            color: #0078d7;
        }

        /* NOVO: Estilo para o Popup de Notifica√ß√µes */
        #notificationPopup {
            position: absolute;
            bottom: 40px; /* Acima da taskbar */
            right: 10px; /* Alinhado √† direita, pr√≥ximo ao rel√≥gio */
            width: 300px;
            max-height: 400px;
            overflow-y: auto;
            background: rgba(30, 30, 30, 0.95);
            color: white;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            display: none; /* Escondido por padr√£o */
            z-index: 101; /* Fica acima de outros menus (101 > 100) */
        }

        .notification-item {
            padding: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 5px;
        }

        .notification-item strong {
            color: #4CAF50; /* Cor verde para destaque, ou vermelha para alerta */
        }

        /* Estilo para a Notifica√ß√£o de San√ß√£o */
        .sancao-alerta {
            background-color: #cc0000;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            margin-bottom: 10px;
            color: white;
        }
    </style>
</head>
<body>

    <div id="login-screen">
        <h2>Bem-vindo(a) ao Wiki Not Pedia WZZM</h2>
        <p>Fa√ßa login para acessar a √°rea de trabalho</p>
        <button id="loginBtn">Entrar com Google</button>
    </div>

    <div id="desktop">
        
        <div class="taskbar">
            <div class="taskbar-left">
                <button class="start-button" id="startBtn">Iniciar</button>
                <button class="start-button" id="adminBtn">Wiki Not P√©dia</button>
                <button class="start-button" id="toolsBtn">Ferramentas</button>
            </div>
            
            <div class="taskbar-right"> 
                <span id="notificationIcon">üîî</span>
                <div id="clock"></div>
            </div>
        </div>

        <div class="menu" id="startMenu"></div>
        <div class="admin-popup" id="adminMenu"></div>
        <div class="admin-popup tools-popup" id="toolsMenu"></div>

        <div id="notificationPopup"></div>
    </div>

    <script type="module">
// üîπ Firebase Auth Config
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
 
const firebaseConfig = {
    apiKey: "AIzaSyB9GkSqTIZ0kbVsba_WOdQeVAETrF9qna0", // Chave de API removida por seguran√ßa
    authDomain: "wzzm-ce3fc.firebaseapp.com",
    projectId: "wzzm-ce3fc",
    storageBucket: "wzzm-ce3fc.appspot.com",
    messagingSenderId: "249427877153",
    appId: "1:249427877153:web:0e4297294794a5aadeb260",
    measurementId: "G-PLKNZNFCQ8"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

// üÜï NOVOS ELEMENTOS GLOBAIS
const notificationIcon = document.getElementById("notificationIcon");
const notificationPopup = document.getElementById("notificationPopup");

// üÜï CONSTANTE DE URL DO JSON
const JSON_URL = 'https://wazzimagiygg.com/cidades_sancionadas.json'; // Certifique-se de que este arquivo existe!


const loginScreen = document.getElementById("login-screen");
const loginBtn = document.getElementById("loginBtn");
const desktop = document.getElementById("desktop");
const startMenu = document.getElementById("startMenu");
const adminMenu = document.getElementById("adminMenu");
// ‚úÖ Elemento do Menu de Ferramentas
const toolsMenu = document.getElementById("toolsMenu");
const clockElement = document.getElementById("clock");

loginBtn.addEventListener("click", () => {
    signInWithPopup(auth, provider);
});

// üìå AJUSTE 1: L√≥gica de clique do √≠cone, fechando os outros menus.
notificationIcon.onclick = () => {
    const isVisible = notificationPopup.style.display === "block";
    
    // Fecha todos os outros menus
    startMenu.style.display = "none";
    adminMenu.style.display = "none";
    toolsMenu.style.display = "none";
    
    // Alterna a visibilidade do popup de notifica√ß√£o
    notificationPopup.style.display = isVisible ? "none" : "block";
};

// ‚úÖ L√≥gica Alterada: Qualquer usu√°rio logado (user) ter√° acesso
onAuthStateChanged(auth, (user) => {
    if (user) {
        // Se houver um usu√°rio logado (qualquer um), exibe o desktop
        loginScreen.style.display = "none";
        desktop.style.display = "block";
        updateClock(); 
        
        // üìå AJUSTE 2: Chama a fun√ß√£o para buscar IP e verificar san√ß√£o aqui, AP√ìS o login.
        buscarIpELocalizacao();
    } else {
        // Se n√£o houver usu√°rio logado, exibe a tela de login
        loginScreen.style.display = "flex";
        desktop.style.display = "none";
        
        // Limpa o popup se o usu√°rio deslogar
        notificationPopup.innerHTML = '';
        notificationIcon.style.color = 'white'; 
    }
});

// 3. MAPA DE √çCONES FONT AWESOME
const iconMap = {
    'Termos de Servi√ßo': 'fas fa-handshake', // Acordo, contrato
    'Pol√≠tica de Privacidade': 'fas fa-shield-alt', // Prote√ß√£o, pol√≠tica
    'Area do colaborador': 'fas fa-user-tie', // Colaborador, profissional
    'Area escolar': 'fas fa-graduation-cap', // Educa√ß√£o, escolar
    'Manual de Pol√≠ticas de direito de privacidade': 'fas fa-book-open', // Manual, leitura
    'Direito de privacidade a honra pessoal de Wazzimagiygg': 'fas fa-gavel', // Lei, direito
    'Quem somos n√≥s?': 'fas fa-info-circle', // Informa√ß√£o
    'Blog Leia e Compreenda': 'fas fa-blog', // Blog
    'Fale com a Administra√ß√£o': 'fas fa-headset', // Suporte, contato
    'Wiki Not Pedia': 'fas fa-globe', // Wikipedia, enciclop√©dia
    'Logoff (Sair)': 'fas fa-sign-out-alt' // Sair, logoff
};

// üîπ Itens do menu principal (com a op√ß√£o Logoff)
const links = [
    { name: 'Termos de Servi√ßo', url: 'https://wazzimagiygg.com/Termos%20de%20Servi%C3%A7o.pdf', iconKey: 'Termos de Servi√ßo' },
    { name: 'Pol√≠tica de Privacidade', url: 'https://wazzimagiygg.com/Pol%C3%ADtica%20de%20Privacidade.pdf', iconKey: 'Pol√≠tica de Privacidade' },
    { name: 'Area do colaborador', url: 'https://wazzimagiygg.com/html/?uid=CKWtV1wmyHKNw6ie7qAh', iconKey: 'Area do colaborador' }, 
    { name: 'Area escolar', url: 'https://wazzimagiygg.com/html/?uid=2yvd72xTNYB4RH3jv9jY', iconKey: 'Area escolar' }, 
    { name: 'Manual de Pol√≠ticas de direito de privacidade ', url: 'https://wazzimagiygg.com/pdf/?uid=TermosDeUsoWNP.pdf', iconKey: 'Manual de Pol√≠ticas de direito de privacidade ' },
    { name: 'Direito de privacidade a honra pessoal de Wazzimagiygg', url: 'https://wazzimagiygg.com/pdf/?uid=Termo%20de%20Ci%C3%AAncia%20e%20Acordo%20sobre%20Identidade%20e%20prote%C3%A7%C3%A3o%20moral%20e%20intelectual%20de%20Wazzimagiygg.pdf', iconKey: 'Direito de privacidade a honra pessoal de Wazzimagiygg' }, 
    { name: 'Quem somos n√≥s?', url: 'https://wazzimagiygg.com/html/?uid=84TOyGBBxrsuzjWLyLwU', iconKey: 'Quem somos n√≥s?' }, 
    { name: 'Blog Leia e Compreenda', url: 'https://leiacompreenda.blogspot.com/', iconKey: 'Blog Leia e Compreenda' },
    { name: 'Fale com a Administra√ß√£o', url: 'https://wazzimagiygg.com/html/?uid=a13IwrEoc1Jmdi2I3Hve', iconKey: 'Fale com a Administra√ß√£o' },
    { name: 'Wiki Not Pedia', url: 'https://wazzimagiygg.com/wnpx.html', iconKey: 'Wiki Not Pedia' },
    { name: 'Logoff (Sair)', action: 'logout', iconKey: 'Logoff (Sair)' } 
];

// üîπ Menu admin separado
const adminLinks = [
    { label: "Chat (Contato)", href: "https://wazzimagiygg.com/html/?uid=a13IwrEoc1Jmdi2I3Hve" }
];

// ‚úÖ Lista de links para o menu de Ferramentas (filtrados no JS)
const rawToolLinks = [
    { name: 'Procurar Artigos Cientificos', url: 'https://wazzimagiygg.com/html/?uid=BMczNyGHmEsMJSHWJrF2' }, 
    { name: 'Espa√ßo Cliente', url: 'https://wazzimagiygg.com/html/?uid=4rLaz9tcyoxZJYOVMf0s' }, 
    { name: 'Chat (Contato)', url: 'https://wazzimagiygg.com/html/?uid=a13IwrEoc1Jmdi2I3Hve' },
    { name: 'Buscar Artigos WNP', url: 'https://wazzimagiygg.com/ferramentasuteis.html' },
    { name: 'Acess√≥rios', url: 'https://wazzimagiygg.com/tools/' },
    { name: 'Adicionar novo Artigo Wiki Not P√©dia', url: 'https://wazzimagiygg.com/html/?uid=p3RYhfyYqNDNjDP3KAFs' },
    { name: 'Editar artigos', url: 'https://wazzimagiygg.com/html/?uid=6cbY8bU3BKFQdH8MWzjw' }, 
    { name: 'Editor na Base 44', url: 'https://wiki-zone-zero-mod-copy-2a26f6a1.base44.app' },
    { name: 'Upload de Imagem', url: 'https://wazzimagiygg.com/html/?uid=RYln5EVrsPY9khlMvnfY' }, 
    { name: 'Upload PDF', url: 'https://wazzimagiygg.com/html/?uid=BgeAuPIBfmJPxi5Xyy2v' }, 
    { name: 'Novo artigo cientifico', url: 'https://wazzimagiygg.com/html/?uid=Bl8ZxEiAXxCIIw73xEEb' } 
];

// ‚úÖ Filtrar links, removendo aqueles com 'base44.app' ou 'base44.com'
const filteredToolLinks = rawToolLinks.filter(link => 
    !link.url.includes('base44.app') && !link.url.includes('base44.com')
);

// ‚úÖ Fun√ß√£o para preencher o menu de ferramentas
function populateToolsMenu() {
    toolsMenu.innerHTML = ''; 
    filteredToolLinks.forEach(link => {
        const a = document.createElement("a");
        // Op√ß√£o: Adicionar √≠cones Font Awesome ao menu de ferramentas tamb√©m (usando um mapa se quiser, ou √≠cones gen√©ricos)
        // Por exemplo, para todos:
        // a.innerHTML = `<i class="fas fa-wrench" style="margin-right: 8px;"></i>${link.name}`; 
        a.textContent = link.name;
        a.href = link.url;
        a.onclick = (e) => {
            e.preventDefault(); 
            openWindow(link.name, link.url); 
            toolsMenu.style.display = "none"; 
        };
        toolsMenu.appendChild(a);
    });
}

// Preenche o menu de ferramentas ao carregar
populateToolsMenu();

// 4. ATUALIZA√á√ÉO: Preenche o Menu Iniciar com Font Awesome
links.forEach(item => {
    const div = document.createElement("div");
    div.className = "menu-item";
    
    // Usa a chave do mapa para obter a classe do √≠cone.
    const iconClass = iconMap[item.iconKey] || 'fas fa-star'; // 'fas fa-star' como fallback
    
    // Usa <i> com a classe Font Awesome em vez de <img>
    div.innerHTML = `<i class="${iconClass}"></i> ${item.name}`;
    
    div.onclick = () => {
        if (item.action === 'logout') {
            handleLogout(); 
        } else {
            openWindow(item.name, item.url);
        }
        startMenu.style.display = "none"; 
    };
    startMenu.appendChild(div);
});

// üîπ Preenche o Menu Admin
adminLinks.forEach(link => {
    const a = document.createElement("a");
    a.textContent = link.label;
    a.style.cursor = 'pointer'; 
    a.onclick = (e) => {
        e.preventDefault(); 
        openWindow(link.label, link.href); 
        adminMenu.style.display = "none"; 
    };
    adminMenu.appendChild(a);
});

const startBtn = document.getElementById("startBtn");
const adminBtn = document.getElementById("adminBtn");
// ‚úÖ Bot√£o Ferramentas
const toolsBtn = document.getElementById("toolsBtn");

startBtn.onclick = () => {
    startMenu.style.display = startMenu.style.display === "block" ? "none" : "block";
    adminMenu.style.display = "none";
    toolsMenu.style.display = "none"; // Garante que o menu de ferramentas feche
    notificationPopup.style.display = "none"; // Fecha o popup de notifica√ß√£o
};

adminBtn.onclick = () => {
    adminMenu.style.display = adminMenu.style.display === "block" ? "none" : "block";
    startMenu.style.display = "none";
    toolsMenu.style.display = "none"; // Garante que o menu de ferramentas feche
    notificationPopup.style.display = "none"; // Fecha o popup de notifica√ß√£o
};

// ‚úÖ L√≥gica de clique para o bot√£o Ferramentas
toolsBtn.onclick = () => {
    // Posi√ß√£o para o toolsMenu (exemplo: ao lado do adminMenu)
    const adminBtnWidth = adminBtn.offsetWidth;
    toolsMenu.style.left = `${10 + startBtn.offsetWidth + adminBtnWidth + 10}px`; 

    toolsMenu.style.display = toolsMenu.style.display === "block" ? "none" : "block";
    startMenu.style.display = "none";
    adminMenu.style.display = "none"; 
    notificationPopup.style.display = "none"; // Fecha o popup de notifica√ß√£o
};

function handleLogout() {
    signOut(auth).then(() => {
        // ...
    }).catch((error) => {
        console.error("Erro ao sair:", error);
        alert("Erro ao tentar fazer logoff.");
    });
}

// Fun√ß√£o para atualizar o rel√≥gio 
function updateClock() {
    const now = new Date();
    
    // Formato da hora (HH:MM)
    const timeString = now.toLocaleTimeString('pt-BR', { 
        hour: '2-digit', 
        minute: '2-digit', 
        hour12: false // Formato 24h
    });
    
    // Formato da data (DD/MM)
    const dateString = now.toLocaleDateString('pt-BR', { 
        day: '2-digit', 
        month: '2-digit' 
    });

    // Atualiza o conte√∫do do elemento #clock
    clockElement.innerHTML = `<span>${timeString}</span><br><span>${dateString}</span>`;

    // Agenda a pr√≥xima atualiza√ß√£o em 1 segundo
    setTimeout(updateClock, 1000);
}


function openWindow(title, url) {
    const win = document.createElement("div");
    win.className = "window";
    win.innerHTML = `
        <div class="window-header">
            <span>${title}</span>
            <div class="window-controls">
                <button class="minimize">‚Äî</button>
                <button class="maximize">‚¨ú</button>
                <button class="close">‚úñ</button>
            </div>
        </div>
        <iframe src="${url}"></iframe>
    `;
    document.body.appendChild(win);

    // ... (c√≥digo de drag, resize e controles da janela) ...
    const header = win.querySelector(".window-header");
    let isDragging = false;
    let offsetX, offsetY;
    let maximized = false;
    let prev = { top: 0, left: 0, width: 0, height: 0 };

    header.addEventListener("mousedown", (e) => {
        isDragging = true;
        offsetX = e.clientX - win.offsetLeft;
        offsetY = e.clientY - win.offsetTop;
    });

    document.addEventListener("mousemove", (e) => {
        if (isDragging && !maximized) {
            win.style.left = e.clientX - offsetX + "px";
            win.style.top = e.clientY - offsetY + "px";
        }
    });

    document.addEventListener("mouseup", () => isDragging = false);

    win.querySelector(".close").onclick = () => win.remove();
    win.querySelector(".minimize").onclick = () => win.style.display = "none";
    win.querySelector(".maximize").onclick = () => {
        if (!maximized) {
            prev = { top: win.offsetTop, left: win.offsetLeft, width: win.offsetWidth, height: win.offsetHeight };
            win.style.top = "0";
            win.style.left = "0";
            win.style.width = "100%";
            win.style.height = "calc(100% - 40px)";
            maximized = true;
        } else {
            win.style.top = prev.top + "px";
            win.style.left = prev.left + "px";
            win.style.width = prev.width + "px";
            win.style.height = prev.height + "px";
            maximized = false;
        }
    };
}

// üîπ 1. Fun√ß√£o principal para buscar IP e Localiza√ß√£o
async function buscarIpELocalizacao() {
    // Limpa as notifica√ß√µes antigas antes de buscar novas informa√ß√µes
    notificationPopup.innerHTML = ''; 
    notificationIcon.style.color = 'white';
    
    try {
        const response = await fetch('https://ipinfo.io/json');
        const data = await response.json();
        
        const ip = data.ip || 'N/A';
        const cidadeDoUsuario = data.city || 'Desconhecida';
        const paisDoUsuario = data.country || ''; 
        
        // Adiciona a primeira notifica√ß√£o no popup (Exibi√ß√£o do IP)
        addNotification(`Seu IP P√∫blico: <strong>${ip}</strong>`, 'info');
        addNotification(`Localiza√ß√£o Detectada: ${cidadeDoUsuario}, ${paisDoUsuario}`, 'info');

        // Verifica se o local est√° sancionado
        verificarSancao(cidadeDoUsuario, paisDoUsuario);
        
    } catch (error) {
        console.error("Erro ao obter IP ou localiza√ß√£o:", error);
        addNotification('Erro: Falha ao obter endere√ßo IP/Localiza√ß√£o.', 'error');
    }
}

// üîπ 2. Fun√ß√£o para adicionar uma notifica√ß√£o ao popup
function addNotification(message, type = 'info') {
    const div = document.createElement("div");
    div.className = `notification-item ${type === 'error' ? 'sancao-alerta' : ''}`;
    div.innerHTML = message;
    
    // Adiciona a notifica√ß√£o no topo da lista (mais recente primeiro)
    notificationPopup.prepend(div); 
}

// üîπ 3. Fun√ß√£o para carregar o JSON e verificar san√ß√£o
async function verificarSancao(cidadeUsuario, paisDoUsuario) {
    try {
        const jsonResponse = await fetch(JSON_URL);
        
        if (!jsonResponse.ok) {
             throw new Error(`Erro HTTP! Status: ${jsonResponse.status}`);
        }
        
        const cidadesSancionadasData = await jsonResponse.json();
        
        const cidadeFormatada = cidadeUsuario.trim().toLowerCase();
        const paisFormatado = paisDoUsuario.trim().toLowerCase();

        // Procura a correspond√™ncia por CIDADE OU PA√çS na lista de objetos
        const alertaEncontrado = cidadesSancionadasData.cidades_sancionadas.find(item => 
            item.cidade.trim().toLowerCase() === cidadeFormatada || 
            item.cidade.trim().toLowerCase() === paisFormatado      
        );
        
        if (alertaEncontrado) {
            // Se a cidade/pa√≠s for encontrado, adiciona o alerta de san√ß√£o
            const alertaHTML = `
                üö® Alerta de San√ß√£o! üö®<br>Regi√£o com poss√≠veis usu√°rios sancionados.
                <br>
                (Moderador: <strong>${alertaEncontrado.moderador}</strong>)
            `;
            addNotification(alertaHTML, 'error');
            
            // Adiciona um √≠cone visual de alerta no √≠cone de notifica√ß√£o
            notificationIcon.style.color = '#cc0000'; // Cor vermelha de alerta
        }
        
    } catch (error) {
        console.warn("Aviso: Falha ao carregar ou processar o JSON de san√ß√µes. Verifique o arquivo.", error);
    }
}
</script>

</body>
</html>
