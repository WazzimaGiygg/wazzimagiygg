<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Visualização do Artigo</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    h1 { font-size: 2em; }
    .meta, .section { margin-bottom: 20px; }
    .section-title { font-weight: bold; margin-top: 10px; }
  </style>
</head>
<body>
  <h1 id="titulo">Carregando...</h1>
  <div class="meta">
    <p><strong>Autor:</strong> <span id="autor"></span></p>
    <p><strong>Idioma:</strong> <span id="idioma"></span></p>
    <p><strong>Tipo:</strong> <span id="tipo"></span></p>
    <p><strong>Publicado em:</strong> <span id="data"></span></p>
  </div>

  <div class="section">
    <div class="section-title">Resumo:</div>
    <div id="resumo"></div>
  </div>
  <div class="section">
    <div class="section-title">Metodologia:</div>
    <div id="metodologia"></div>
  </div>
  <div class="section">
    <div class="section-title">Discussão:</div>
    <div id="discussao"></div>
  </div>
  <div class="section">
    <div class="section-title">Conclusão:</div>
    <div id="conclusao"></div>
  </div>
  <div class="section">
    <div class="section-title">Fontes:</div>
    <div id="fontes"></div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "SUA_API_KEY",
      authDomain: "SEU_DOMINIO.firebaseapp.com",
      projectId: "wzzm-org",
      storageBucket: "wzzm-org.appspot.com",
      messagingSenderId: "SEU_ID",
      appId: "SEU_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    function getParam(nome) {
      const url = new URL(window.location.href);
      return url.searchParams.get(nome);
    }

    const artigoId = getParam('id');

    if (artigoId) {
      const docRef = doc(db, "artigos", artigoId);
      getDoc(docRef).then((docSnap) => {
        if (docSnap.exists()) {
          const dados = docSnap.data();

          document.getElementById('titulo').textContent = dados.title || "(sem título)";
          document.getElementById('autor').textContent = dados.author || "Desconhecido";
          document.getElementById('idioma').textContent = dados.lang || "pt-BR";
          document.getElementById('tipo').textContent = dados.type || "-";
          document.getElementById('data').textContent = dados.date || "-";

          document.getElementById('resumo').innerHTML = dados.abstract || "Não informado.";
          document.getElementById('metodologia').innerHTML = dados.methodology || "Não especificada.";
          document.getElementById('discussao').innerHTML = dados.discussion || "Sem conteúdo.";
          document.getElementById('conclusao').innerHTML = dados.conclusion || "Sem conclusão.";
          document.getElementById('fontes').innerHTML = (dados.sources || []).join("<br>") || "Nenhuma fonte.";
        } else {
          document.getElementById('titulo').textContent = "Artigo não encontrado.";
        }
      });
    } else {
      document.getElementById('titulo').textContent = "ID do artigo não informado na URL.";
    }
  </script>
</body>
</html>
